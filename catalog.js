import{b as L,f as b,d as k}from"./assets/scroll-up-DuU_tC5l.js";const y=document.querySelector("#trailerModal"),v=document.querySelector("#trailerIframe"),E=y.querySelectorAll("[data-close]");function x(e){v.src=`https://www.youtube.com/embed/${e}?autoplay=1`,y.classList.remove("is-hidden"),document.body.style.overflow="hidden"}function w(){v.src="",y.classList.add("is-hidden"),document.body.style.overflow=""}document.addEventListener("keydown",e=>{e.key==="Escape"&&w()});E.forEach(e=>{e.addEventListener("click",w)});const u="data:image/svg+xml,%3csvg%20class='popup-close-icon'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%3e%3cpath%20d='M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'/%3e%3cpath%20d='M6%2018L18%206'%20stroke='currentColor'%20stroke-width='2'/%3e%3c/svg%3e%3c/button%3e",q="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2011.25L0.75%200.75M11.25%200.75L0.75%2011.25'%20stroke='%23F87719'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";let d=null;async function M(){if(d)return d;const e=await L();return d={},e.genres&&Array.isArray(e.genres)&&e.genres.forEach(t=>{d[t.id]=t.name}),d}function S(){const e=localStorage.getItem("library");return e?JSON.parse(e):[]}function C(e){localStorage.setItem("library",JSON.stringify(e))}function T(e,t){let o=S();const l=e.id;o.includes(l)?(o=o.filter(i=>i!==l),t.textContent="Add to library",t.classList.remove("removed")):(o.push(l),t.textContent="Remove from my library",t.classList.add("removed")),C(o)}function _(e,t){S().includes(e.id)?(t.textContent="Remove from my library",t.classList.add("removed")):(t.textContent="Add to library",t.classList.remove("removed"))}async function N(e){let t=document.querySelector("#popup-template");if(!t){const l=window.location.hostname==="localhost";let i;l?i="/popup.html":i=`/${window.location.pathname.split("/")[1]}/popup.html`,fetch(i).then(a=>{if(!a.ok)throw console.error(`Popup.html yüklenemedi. Durum: ${a.status}, URL: ${a.url}`),new Error("Network response was not ok.");return a.text()}).then(async a=>{const s=document.createElement("div");s.innerHTML=a;const r=s.querySelector(".movie-popup-overlay");r?(r.id="popup-template",document.body.appendChild(r),await f(r,e)):console.error("movie-popup-overlay bulunamadı, HTML içeriği yanlış olabilir.")}).catch(a=>{console.error("Popup yüklenirken bir hata oluştu:",a)});return}const o=t.cloneNode(!0);o.id="",await f(o,e)}async function f(e,t){e.style.display="flex";const o=e.querySelector(".movie-popup-img");o.src=t.poster_path?`https://image.tmdb.org/t/p/original${t.poster_path}`:"",o.alt=t.title,e.querySelector(".movie-popup-title").textContent=t.title;const l=t.vote_average!=null?t.vote_average.toFixed(1):"-";e.querySelector(".vote-avg").textContent=l,e.querySelector(".vote-count").textContent=t.vote_count??"-";const i=t.popularity!=null?t.popularity.toFixed(1):"-";e.querySelector(".popularity-value").textContent=i;let a="-";if(t.genre_names&&Array.isArray(t.genre_names))a=t.genre_names.join(", ");else if(t.genre_ids&&Array.isArray(t.genre_ids)){const n=await M();a=t.genre_ids.map(p=>n[p]||p).join(", ")}e.querySelector(".genre-value").textContent=a,e.querySelector(".about-value").textContent=t.overview||"No description.";const s=e.querySelector(".movie-popup-add-btn");s&&(_(t,s),s.addEventListener("click",function(){T(t,this)}));const r=e.querySelector(".movie-popup-close");let c=r.querySelector("img");c||(c=document.createElement("img"),c.alt="close",c.className="close-icon",c.width=24,c.height=24,c.style.width="24px",c.style.height="24px",c.src=u,r.appendChild(c)),window.location.hostname==="localhost"||window.location.pathname.split("/")[1],r.addEventListener("mouseenter",()=>{r.querySelector("img").src=q}),r.addEventListener("mouseleave",()=>{r.querySelector("img").src=u}),r.addEventListener("click",()=>e.remove());function g(n){n.key==="Escape"&&(e.remove(),document.removeEventListener("keydown",g))}if(document.addEventListener("keydown",g),e.addEventListener("mousedown",function(n){n.target===e&&e.remove()}),document.body.appendChild(e),r){r.innerHTML="";const n=document.createElement("img");n.alt="close",n.className="close-icon",n.width=24,n.height=24,n.style.width="24px",n.style.height="24px",n.src=u,r.appendChild(n)}}const B=document.querySelector(".catalog-hero"),I=document.querySelector(".catalog-hero-title"),A=document.querySelector(".catalog-hero-overview"),H=document.querySelector(".catalog-hero-rating"),P=document.querySelector(".catalog-hero-btn.trailer"),$=document.querySelector(".catalog-hero-btn.details");let m=null,h=null;async function j(){try{const t=(await b()).results;if(!t||t.length===0)return;const o=t[Math.floor(Math.random()*t.length)];m=o.id,h=o;const l=o.backdrop_path||o.poster_path,i=l?`https://image.tmdb.org/t/p/original${l}`:"";i&&B.style.setProperty("--hero-bg",`url(${i})`),I.textContent=o.title||o.name||"No title",A.textContent=o.overview||"No description available",H.innerHTML=D(o.vote_average)}catch(e){console.error("Hero verisi alınamadı:",e)}}function D(e){const t=Math.floor(e/2),o=e%2>=1?"½":"";return"★".repeat(t)+(o?"★":"")+"☆".repeat(5-t-(o?1:0))}async function F(){if(m)try{const t=(await k(m)).results.find(o=>o.type==="Trailer"&&o.site==="YouTube");t?x(t.key):alert("Trailer not found.")}catch(e){console.error("Trailer yüklenemedi:",e)}}P.addEventListener("click",F);$.addEventListener("click",()=>{h&&N(h)});j();console.log("catalog.js yüklendi!");document.getElementById("search-form");document.getElementById("movie-list");document.getElementById("no-results");let R=document.createElement("div");R.className="pagination-container";
//# sourceMappingURL=catalog.js.map
