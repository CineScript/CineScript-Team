{"version":3,"file":"catalog.js","sources":["../src/js/modal-trailer.js","../src/js/catalog-hero.js"],"sourcesContent":["const modal = document.createElement('div');\nmodal.classList.add('trailer-modal', 'is-hidden');\n\nmodal.innerHTML = `\n  <div class=\"trailer-modal-backdrop\">\n    <div class=\"trailer-modal-content\">\n      <button class=\"trailer-modal-close\" aria-label=\"Close modal\">&times;</button>\n      <iframe\n        id=\"trailer-video\"\n        width=\"100%\"\n        height=\"100%\"\n        frameborder=\"0\"\n        allowfullscreen\n        allow=\"autoplay; encrypted-media\"\n      ></iframe>\n    </div>\n  </div>\n`;\n\ndocument.body.appendChild(modal);\n\nconst closeBtn = modal.querySelector('.trailer-modal-close');\nconst backdrop = modal.querySelector('.trailer-modal-backdrop');\nconst iframe = modal.querySelector('#trailer-video');\n\nexport function openTrailerModal(youtubeKey) {\n  iframe.src = `https://www.youtube.com/embed/${youtubeKey}?autoplay=1`;\n  modal.classList.remove('is-hidden');\n}\n\nfunction closeTrailerModal() {\n  modal.classList.add('is-hidden');\n  iframe.src = '';\n}\n\ncloseBtn.addEventListener('click', closeTrailerModal);\nbackdrop.addEventListener('click', e => {\n  if (e.target === backdrop) {\n    closeTrailerModal();\n  }\n});\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape' && !modal.classList.contains('is-hidden')) {\n    closeTrailerModal();\n  }\n});\n","import { fetchDailyTrending, fetchMovieVideos } from '../api/tmdbApi.js';\nimport { openTrailerModal } from './modal-trailer.js';\n\nconst heroSection = document.querySelector('.catalog-hero');\nconst titleEl = document.querySelector('.catalog-hero-title');\nconst overviewEl = document.querySelector('.catalog-hero-overview');\nconst ratingEl = document.querySelector('.catalog-hero-rating');\nconst trailerBtn = document.querySelector('.catalog-hero-btn.trailer');\nconst detailsBtn = document.querySelector('.catalog-hero-btn.details');\n\nlet currentMovieId = null;\n\nasync function renderRandomHeroMovie() {\n  try {\n    const data = await fetchDailyTrending();\n    const movies = data.results;\n\n    if (!movies || movies.length === 0) return;\n\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    currentMovieId = randomMovie.id;\n\n    const backdrop = randomMovie.backdrop_path || randomMovie.poster_path;\n    const bgUrl = backdrop\n      ? `https://image.tmdb.org/t/p/original${backdrop}`\n      : '';\n\n    if (bgUrl) {\n      heroSection.style.setProperty('--hero-bg', `url(${bgUrl})`);\n    }\n\n    titleEl.textContent = randomMovie.title || randomMovie.name || 'No title';\n    overviewEl.textContent = randomMovie.overview || 'No description available';\n    ratingEl.innerHTML = generateStars(randomMovie.vote_average);\n  } catch (err) {\n    console.error('Hero verisi alınamadı:', err);\n  }\n}\n\nfunction generateStars(voteAverage) {\n  const fullStars = Math.floor(voteAverage / 2);\n  const halfStar = voteAverage % 2 >= 1 ? '½' : '';\n  return (\n    '★'.repeat(fullStars) +\n    (halfStar ? '★' : '') +\n    '☆'.repeat(5 - fullStars - (halfStar ? 1 : 0))\n  );\n}\n\nasync function handleTrailerClick() {\n  if (!currentMovieId) return;\n\n  try {\n    const data = await fetchMovieVideos(currentMovieId);\n    const trailer = data.results.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n\n    if (trailer) {\n      openTrailerModal(trailer.key);\n    } else {\n      alert('Trailer not found.');\n    }\n  } catch (err) {\n    console.error('Trailer yüklenemedi:', err);\n  }\n}\n\ntrailerBtn.addEventListener('click', handleTrailerClick);\ndetailsBtn.addEventListener('click', () => {\n  alert('More details clicked!');\n});\n\nrenderRandomHeroMovie();\n"],"names":["modal","closeBtn","backdrop","iframe","openTrailerModal","youtubeKey","closeTrailerModal","heroSection","titleEl","overviewEl","ratingEl","trailerBtn","detailsBtn","currentMovieId","renderRandomHeroMovie","movies","fetchDailyTrending","randomMovie","bgUrl","generateStars","err","voteAverage","fullStars","halfStar","handleTrailerClick","trailer","fetchMovieVideos","v"],"mappings":"+FAAA,MAAMA,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,gBAAiB,WAAW,EAEhDA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBlB,SAAS,KAAK,YAAYA,CAAK,EAE/B,MAAMC,EAAWD,EAAM,cAAc,sBAAsB,EACrDE,EAAWF,EAAM,cAAc,yBAAyB,EACxDG,EAASH,EAAM,cAAc,gBAAgB,EAE5C,SAASI,EAAiBC,EAAY,CAC3CF,EAAO,IAAM,iCAAiCE,CAAU,cACxDL,EAAM,UAAU,OAAO,WAAW,CACpC,CAEA,SAASM,GAAoB,CAC3BN,EAAM,UAAU,IAAI,WAAW,EAC/BG,EAAO,IAAM,EACf,CAEAF,EAAS,iBAAiB,QAASK,CAAiB,EACpDJ,EAAS,iBAAiB,QAAS,GAAK,CAClC,EAAE,SAAWA,GACfI,EAAiB,CAErB,CAAC,EACD,SAAS,iBAAiB,UAAW,GAAK,CACpC,EAAE,MAAQ,UAAY,CAACN,EAAM,UAAU,SAAS,WAAW,GAC7DM,EAAiB,CAErB,CAAC,EC1CD,MAAMC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,qBAAqB,EACtDC,EAAa,SAAS,cAAc,wBAAwB,EAC5DC,EAAW,SAAS,cAAc,sBAAsB,EACxDC,EAAa,SAAS,cAAc,2BAA2B,EAC/DC,EAAa,SAAS,cAAc,2BAA2B,EAErE,IAAIC,EAAiB,KAErB,eAAeC,GAAwB,CACrC,GAAI,CAEF,MAAMC,GADO,MAAMC,EAAkB,GACjB,QAEpB,GAAI,CAACD,GAAUA,EAAO,SAAW,EAAG,OAEpC,MAAME,EAAcF,EAAO,KAAK,MAAM,KAAK,OAAM,EAAKA,EAAO,MAAM,CAAC,EACpEF,EAAiBI,EAAY,GAE7B,MAAMf,EAAWe,EAAY,eAAiBA,EAAY,YACpDC,EAAQhB,EACV,sCAAsCA,CAAQ,GAC9C,GAEAgB,GACFX,EAAY,MAAM,YAAY,YAAa,OAAOW,CAAK,GAAG,EAG5DV,EAAQ,YAAcS,EAAY,OAASA,EAAY,MAAQ,WAC/DR,EAAW,YAAcQ,EAAY,UAAY,2BACjDP,EAAS,UAAYS,EAAcF,EAAY,YAAY,CAC/D,OAAWG,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,CAC/C,CACA,CAEA,SAASD,EAAcE,EAAa,CAClC,MAAMC,EAAY,KAAK,MAAMD,EAAc,CAAC,EACtCE,EAAWF,EAAc,GAAK,EAAI,IAAM,GAC9C,MACE,IAAI,OAAOC,CAAS,GACnBC,EAAW,IAAM,IAClB,IAAI,OAAO,EAAID,GAAaC,EAAW,EAAI,EAAE,CAEjD,CAEA,eAAeC,GAAqB,CAClC,GAAKX,EAEL,GAAI,CAEF,MAAMY,GADO,MAAMC,EAAiBb,CAAc,GAC7B,QAAQ,KAC3Bc,GAAKA,EAAE,OAAS,WAAaA,EAAE,OAAS,SAC9C,EAEQF,EACFrB,EAAiBqB,EAAQ,GAAG,EAE5B,MAAM,oBAAoB,CAEhC,OAAWL,EAAK,CACZ,QAAQ,MAAM,uBAAwBA,CAAG,CAC7C,CACA,CAEAT,EAAW,iBAAiB,QAASa,CAAkB,EACvDZ,EAAW,iBAAiB,QAAS,IAAM,CACzC,MAAM,uBAAuB,CAC/B,CAAC,EAEDE,EAAqB"}