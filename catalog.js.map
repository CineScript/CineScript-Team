{"version":3,"file":"catalog.js","sources":["../src/js/modal-trailer.js","../src/js/catalog-hero.js"],"sourcesContent":["const modal = document.querySelector('#trailerModal');\nconst iframe = document.querySelector('#trailerIframe');\nconst closeButtons = modal.querySelectorAll('[data-close]');\n\nexport function openTrailerModal(videoKey) {\n  iframe.src = `https://www.youtube.com/embed/${videoKey}?autoplay=1`;\n  modal.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n}\n\nfunction closeTrailerModal() {\n  iframe.src = ''; // videoyu durdur\n  modal.classList.add('is-hidden');\n  document.body.style.overflow = '';\n}\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    closeTrailerModal();\n  }\n});\n\ncloseButtons.forEach(btn => {\n  btn.addEventListener('click', closeTrailerModal);\n});\n","import { fetchDailyTrending, fetchMovieVideos } from '../api/tmdbApi.js';\nimport { openTrailerModal } from './modal-trailer.js';\nimport { createMoviePopup } from './popup.js';\n\nconst heroSection = document.querySelector('.catalog-hero');\nconst titleEl = document.querySelector('.catalog-hero-title');\nconst overviewEl = document.querySelector('.catalog-hero-overview');\nconst ratingEl = document.querySelector('.catalog-hero-rating');\nconst trailerBtn = document.querySelector('.catalog-hero-btn.trailer');\nconst detailsBtn = document.querySelector('.catalog-hero-btn.details');\n\nlet currentMovieId = null;\nlet currentMovieData = null;\n\nasync function renderRandomHeroMovie() {\n  try {\n    const data = await fetchDailyTrending();\n    const movies = data.results;\n\n    if (!movies || movies.length === 0) return;\n\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    currentMovieId = randomMovie.id;\n    currentMovieData = randomMovie;\n\n    const backdrop = randomMovie.backdrop_path || randomMovie.poster_path;\n    const bgUrl = backdrop\n      ? `https://image.tmdb.org/t/p/original${backdrop}`\n      : '';\n\n    if (bgUrl) {\n      heroSection.style.setProperty('--hero-bg', `url(${bgUrl})`);\n    }\n\n    titleEl.textContent = randomMovie.title || randomMovie.name || 'No title';\n    overviewEl.textContent = randomMovie.overview || 'No description available';\n    ratingEl.innerHTML = generateStars(randomMovie.vote_average);\n  } catch (err) {\n    console.error('Hero verisi alınamadı:', err);\n  }\n}\n\nfunction generateStars(voteAverage) {\n  const fullStars = Math.floor(voteAverage / 2);\n  const halfStar = voteAverage % 2 >= 1 ? '½' : '';\n  return (\n    '★'.repeat(fullStars) +\n    (halfStar ? '★' : '') +\n    '☆'.repeat(5 - fullStars - (halfStar ? 1 : 0))\n  );\n}\n\nasync function handleTrailerClick() {\n  if (!currentMovieId) return;\n\n  try {\n    const data = await fetchMovieVideos(currentMovieId);\n    const trailer = data.results.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n\n    if (trailer) {\n      openTrailerModal(trailer.key);\n    } else {\n      alert('Trailer not found.');\n    }\n  } catch (err) {\n    console.error('Trailer yüklenemedi:', err);\n  }\n}\n\ntrailerBtn.addEventListener('click', handleTrailerClick);\n\ndetailsBtn.addEventListener('click', () => {\n  if (currentMovieData) {\n    createMoviePopup(currentMovieData);\n  }\n});\n\nrenderRandomHeroMovie();\n"],"names":["modal","iframe","closeButtons","openTrailerModal","videoKey","closeTrailerModal","btn","heroSection","titleEl","overviewEl","ratingEl","trailerBtn","detailsBtn","currentMovieId","currentMovieData","renderRandomHeroMovie","movies","fetchDailyTrending","randomMovie","backdrop","bgUrl","generateStars","err","voteAverage","fullStars","halfStar","handleTrailerClick","trailer","fetchMovieVideos","v","createMoviePopup"],"mappings":"sGAAA,MAAMA,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAeF,EAAM,iBAAiB,cAAc,EAEnD,SAASG,EAAiBC,EAAU,CACzCH,EAAO,IAAM,iCAAiCG,CAAQ,cACtDJ,EAAM,UAAU,OAAO,WAAW,EAClC,SAAS,KAAK,MAAM,SAAW,QACjC,CAEA,SAASK,GAAoB,CAC3BJ,EAAO,IAAM,GACbD,EAAM,UAAU,IAAI,WAAW,EAC/B,SAAS,KAAK,MAAM,SAAW,EACjC,CAEA,SAAS,iBAAiB,UAAW,GAAK,CACpC,EAAE,MAAQ,UACZK,EAAiB,CAErB,CAAC,EAEDH,EAAa,QAAQI,GAAO,CAC1BA,EAAI,iBAAiB,QAASD,CAAiB,CACjD,CAAC,ECpBD,MAAME,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,qBAAqB,EACtDC,EAAa,SAAS,cAAc,wBAAwB,EAC5DC,EAAW,SAAS,cAAc,sBAAsB,EACxDC,EAAa,SAAS,cAAc,2BAA2B,EAC/DC,EAAa,SAAS,cAAc,2BAA2B,EAErE,IAAIC,EAAiB,KACjBC,EAAmB,KAEvB,eAAeC,GAAwB,CACrC,GAAI,CAEF,MAAMC,GADO,MAAMC,EAAkB,GACjB,QAEpB,GAAI,CAACD,GAAUA,EAAO,SAAW,EAAG,OAEpC,MAAME,EAAcF,EAAO,KAAK,MAAM,KAAK,OAAM,EAAKA,EAAO,MAAM,CAAC,EACpEH,EAAiBK,EAAY,GAC7BJ,EAAmBI,EAEnB,MAAMC,EAAWD,EAAY,eAAiBA,EAAY,YACpDE,EAAQD,EACV,sCAAsCA,CAAQ,GAC9C,GAEAC,GACFb,EAAY,MAAM,YAAY,YAAa,OAAOa,CAAK,GAAG,EAG5DZ,EAAQ,YAAcU,EAAY,OAASA,EAAY,MAAQ,WAC/DT,EAAW,YAAcS,EAAY,UAAY,2BACjDR,EAAS,UAAYW,EAAcH,EAAY,YAAY,CAC/D,OAAWI,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,CAC/C,CACA,CAEA,SAASD,EAAcE,EAAa,CAClC,MAAMC,EAAY,KAAK,MAAMD,EAAc,CAAC,EACtCE,EAAWF,EAAc,GAAK,EAAI,IAAM,GAC9C,MACE,IAAI,OAAOC,CAAS,GACnBC,EAAW,IAAM,IAClB,IAAI,OAAO,EAAID,GAAaC,EAAW,EAAI,EAAE,CAEjD,CAEA,eAAeC,GAAqB,CAClC,GAAKb,EAEL,GAAI,CAEF,MAAMc,GADO,MAAMC,EAAiBf,CAAc,GAC7B,QAAQ,KAC3BgB,GAAKA,EAAE,OAAS,WAAaA,EAAE,OAAS,SAC9C,EAEQF,EACFxB,EAAiBwB,EAAQ,GAAG,EAE5B,MAAM,oBAAoB,CAEhC,OAAWL,EAAK,CACZ,QAAQ,MAAM,uBAAwBA,CAAG,CAC7C,CACA,CAEAX,EAAW,iBAAiB,QAASe,CAAkB,EAEvDd,EAAW,iBAAiB,QAAS,IAAM,CACrCE,GACFgB,EAAiBhB,CAAgB,CAErC,CAAC,EAEDC,EAAqB"}