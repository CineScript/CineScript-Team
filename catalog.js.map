{"version":3,"file":"catalog.js","sources":["../src/js/modal-trailer.js","../src/js/catalog-hero.js"],"sourcesContent":["const modal = document.createElement('div');\nmodal.classList.add('trailer-modal', 'is-hidden');\n\nmodal.innerHTML = `\n  <div class=\"trailer-modal-backdrop\">\n    <div class=\"trailer-modal-content\">\n      <button class=\"trailer-modal-close\" aria-label=\"Close modal\">&times;</button>\n      <iframe\n        id=\"trailer-video\"\n        width=\"100%\"\n        height=\"100%\"\n        frameborder=\"0\"\n        allowfullscreen\n        allow=\"autoplay; encrypted-media\"\n      ></iframe>\n    </div>\n  </div>\n`;\n\ndocument.body.appendChild(modal);\n\nconst closeBtn = modal.querySelector('.trailer-modal-close');\nconst backdrop = modal.querySelector('.trailer-modal-backdrop');\nconst iframe = modal.querySelector('#trailer-video');\n\nexport function openTrailerModal(youtubeKey) {\n  iframe.src = `https://www.youtube.com/embed/${youtubeKey}?autoplay=1`;\n  modal.classList.remove('is-hidden');\n}\n\nfunction closeTrailerModal() {\n  modal.classList.add('is-hidden');\n  iframe.src = '';\n}\n\ncloseBtn.addEventListener('click', closeTrailerModal);\nbackdrop.addEventListener('click', e => {\n  if (e.target === backdrop) {\n    closeTrailerModal();\n  }\n});\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape' && !modal.classList.contains('is-hidden')) {\n    closeTrailerModal();\n  }\n});\n","import { fetchDailyTrending, fetchMovieVideos } from '../api/tmdbApi.js';\nimport { openTrailerModal } from './modal-trailer.js';\n\nconst titleEl = document.querySelector('.catalog-hero-title');\nconst overviewEl = document.querySelector('.catalog-hero-overview');\nconst trailerBtn = document.querySelector('.catalog-hero-btn.trailer');\nconst detailsBtn = document.querySelector('.catalog-hero-btn.details');\nconst heroSection = document.querySelector('.catalog-hero');\nlet currentMovieId = null;\n\nasync function renderRandomHeroMovie() {\n  try {\n    const data = await fetchDailyTrending();\n    const movies = data.results;\n\n    if (!movies || movies.length === 0) {\n      console.error('Trend filmler bulunamadı.');\n      return;\n    }\n\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    currentMovieId = randomMovie.id;\n\n    const posterPath = randomMovie.backdrop_path || randomMovie.poster_path;\n\n    if (posterPath) {\n      const bgUrl = `https://image.tmdb.org/t/p/original${posterPath}`;\n      heroSection.style.backgroundImage = `url(${bgUrl})`;\n    } else {\n      heroSection.style.backgroundColor = '#000';\n    }\n\n    titleEl.textContent =\n      randomMovie.title || randomMovie.name || 'Film adı yok';\n    overviewEl.textContent = randomMovie.overview || 'Açıklama bulunamadı.';\n  } catch (error) {\n    console.error('Hero bölümü yüklenirken hata:', error);\n  }\n}\n\nasync function handleTrailerClick() {\n  if (!currentMovieId) return;\n\n  try {\n    const data = await fetchMovieVideos(currentMovieId);\n    const videos = data.results;\n\n    if (!videos || videos.length === 0) {\n      alert('Bu film için video bulunamadı.');\n      return;\n    }\n\n    const trailer = videos.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n\n    if (trailer) {\n      openTrailerModal(trailer.key);\n    } else {\n      alert('Fragman bulunamadı.');\n    }\n  } catch (error) {\n    console.error('Fragman yüklenirken hata:', error);\n  }\n}\n\ntrailerBtn.addEventListener('click', handleTrailerClick);\ndetailsBtn.addEventListener('click', () => {\n  alert('More details tıklandı!');\n});\n\nrenderRandomHeroMovie();\n"],"names":["modal","closeBtn","backdrop","iframe","openTrailerModal","youtubeKey","closeTrailerModal","titleEl","overviewEl","trailerBtn","detailsBtn","heroSection","currentMovieId","renderRandomHeroMovie","movies","fetchDailyTrending","randomMovie","posterPath","bgUrl","error","handleTrailerClick","videos","fetchMovieVideos","trailer","v"],"mappings":"+FAAA,MAAMA,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,gBAAiB,WAAW,EAEhDA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBlB,SAAS,KAAK,YAAYA,CAAK,EAE/B,MAAMC,EAAWD,EAAM,cAAc,sBAAsB,EACrDE,EAAWF,EAAM,cAAc,yBAAyB,EACxDG,EAASH,EAAM,cAAc,gBAAgB,EAE5C,SAASI,EAAiBC,EAAY,CAC3CF,EAAO,IAAM,iCAAiCE,CAAU,cACxDL,EAAM,UAAU,OAAO,WAAW,CACpC,CAEA,SAASM,GAAoB,CAC3BN,EAAM,UAAU,IAAI,WAAW,EAC/BG,EAAO,IAAM,EACf,CAEAF,EAAS,iBAAiB,QAASK,CAAiB,EACpDJ,EAAS,iBAAiB,QAAS,GAAK,CAClC,EAAE,SAAWA,GACfI,EAAiB,CAErB,CAAC,EACD,SAAS,iBAAiB,UAAW,GAAK,CACpC,EAAE,MAAQ,UAAY,CAACN,EAAM,UAAU,SAAS,WAAW,GAC7DM,EAAiB,CAErB,CAAC,EC1CD,MAAMC,EAAU,SAAS,cAAc,qBAAqB,EACtDC,EAAa,SAAS,cAAc,wBAAwB,EAC5DC,EAAa,SAAS,cAAc,2BAA2B,EAC/DC,EAAa,SAAS,cAAc,2BAA2B,EAC/DC,EAAc,SAAS,cAAc,eAAe,EAC1D,IAAIC,EAAiB,KAErB,eAAeC,GAAwB,CACrC,GAAI,CAEF,MAAMC,GADO,MAAMC,EAAkB,GACjB,QAEpB,GAAI,CAACD,GAAUA,EAAO,SAAW,EAAG,CAClC,QAAQ,MAAM,2BAA2B,EACzC,MACN,CAEI,MAAME,EAAcF,EAAO,KAAK,MAAM,KAAK,OAAM,EAAKA,EAAO,MAAM,CAAC,EACpEF,EAAiBI,EAAY,GAE7B,MAAMC,EAAaD,EAAY,eAAiBA,EAAY,YAE5D,GAAIC,EAAY,CACd,MAAMC,EAAQ,sCAAsCD,CAAU,GAC9DN,EAAY,MAAM,gBAAkB,OAAOO,CAAK,GACtD,MACMP,EAAY,MAAM,gBAAkB,OAGtCJ,EAAQ,YACNS,EAAY,OAASA,EAAY,MAAQ,eAC3CR,EAAW,YAAcQ,EAAY,UAAY,sBACrD,OAAWG,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACxD,CACA,CAEA,eAAeC,GAAqB,CAClC,GAAKR,EAEL,GAAI,CAEF,MAAMS,GADO,MAAMC,EAAiBV,CAAc,GAC9B,QAEpB,GAAI,CAACS,GAAUA,EAAO,SAAW,EAAG,CAClC,MAAM,gCAAgC,EACtC,MACN,CAEI,MAAME,EAAUF,EAAO,KACrBG,GAAKA,EAAE,OAAS,WAAaA,EAAE,OAAS,SAC9C,EAEQD,EACFnB,EAAiBmB,EAAQ,GAAG,EAE5B,MAAM,qBAAqB,CAEjC,OAAWJ,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACpD,CACA,CAEAV,EAAW,iBAAiB,QAASW,CAAkB,EACvDV,EAAW,iBAAiB,QAAS,IAAM,CACzC,MAAM,wBAAwB,CAChC,CAAC,EAEDG,EAAqB"}