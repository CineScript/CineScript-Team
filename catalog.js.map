{"version":3,"file":"catalog.js","sources":["../src/js/modal-trailer.js","../src/js/popup.js","../src/js/catalog-hero.js","../src/js/catalog.js"],"sourcesContent":["const modal = document.querySelector('#trailerModal');\nconst iframe = document.querySelector('#trailerIframe');\nconst closeButtons = modal.querySelectorAll('[data-close]');\n\nexport function openTrailerModal(videoKey) {\n  iframe.src = `https://www.youtube.com/embed/${videoKey}?autoplay=1`;\n  modal.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n}\n\nfunction closeTrailerModal() {\n  iframe.src = ''; // videoyu durdur\n  modal.classList.add('is-hidden');\n  document.body.style.overflow = '';\n}\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    closeTrailerModal();\n  }\n});\n\ncloseButtons.forEach(btn => {\n  btn.addEventListener('click', closeTrailerModal);\n});\n","import { fetchGenres } from '../api/tmdbApi.js';\n\n// 1. Popup'u gösterme fonksiyonu\nexport async function createMoviePopup(movie, genreMap) {\n  let template = document.querySelector('#catalog-popup-template');\n\n  if (!template) {\n    const popupPath = './popup.html';\n\n    try {\n      const res = await fetch(popupPath);\n      if (!res.ok) {\n        console.error(\n          `Popup.html yüklenemedi. Durum: ${res.status}, URL: ${res.url}`\n        );\n        return;\n      }\n\n      const html = await res.text();\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = html;\n\n      const popupSection = tempDiv.querySelector('.movie-popup-section');\n      if (!popupSection) {\n        console.error('.movie-popup-section bulunamadı.');\n        return;\n      }\n\n      popupSection.id = 'catalog-popup-template';\n      document.body.appendChild(popupSection);\n      await showCatalogPopupFromTemplate(popupSection, movie, genreMap);\n    } catch (error) {\n      console.error('Popup yüklenirken bir hata oluştu:', error);\n    }\n\n    return;\n  }\n\n  const popupSection = template.cloneNode(true);\n  popupSection.id = '';\n  const popupOverlay = popupSection.querySelector('.movie-popup-overlay');\n  await showCatalogPopupFromTemplate(popupSection, movie, genreMap);\n}\n\n// --------------------------------------------\n// 2. Popup içeriğini doldurma ve event ekleme\n// --------------------------------------------\nasync function showCatalogPopupFromTemplate(popupSection, movie, genreMap) {\n  popupSection.style.display = 'block';\n  const popupOverlay = popupSection.querySelector('.movie-popup-overlay');\n\n  const img = popupOverlay.querySelector('.movie-popup-img');\n  img.src = movie.poster_path\n    ? `https://image.tmdb.org/t/p/original${movie.poster_path}`\n    : '';\n  img.alt = movie.title;\n\n  popupOverlay.querySelector('.movie-popup-title').textContent = movie.title;\n  popupOverlay.querySelector('.vote-avg').textContent =\n    movie.vote_average?.toFixed(1) ?? '-';\n  popupOverlay.querySelector('.vote-count').textContent =\n    movie.vote_count ?? '-';\n  popupOverlay.querySelector('.popularity-value').textContent =\n    movie.popularity?.toFixed(1) ?? '-';\n\n  let genreText = '-';\n  if (movie.genre_names?.length) {\n    genreText = movie.genre_names.join(', ');\n  } else if (movie.genres?.length) {\n    genreText = movie.genres.map(g => g.name).join(', ');\n  } else if (movie.genre_ids?.length) {\n    genreText = movie.genre_ids.map(id => genreMap[id] || id).join(', ');\n  }\n  popupOverlay.querySelector('.genre-value').textContent = genreText;\n\n  popupOverlay.querySelector('.about-value').textContent =\n    movie.overview || 'No description.';\n\n  // Add to Library butonu\n  const addBtn = popupOverlay.querySelector('.movie-popup-add-btn');\n  if (addBtn) {\n    // Film zaten library'de mi kontrol et\n    let library = JSON.parse(localStorage.getItem('library')) || [];\n    const isInLibrary = library.includes(movie.id);\n\n    // Tek event listener kullan\n    addBtn.onclick = () => {\n      let currentLibrary = JSON.parse(localStorage.getItem('library')) || [];\n      const isCurrentlyInLibrary = currentLibrary.includes(movie.id);\n\n      if (isCurrentlyInLibrary) {\n        // Film library'de, çıkar\n        currentLibrary = currentLibrary.filter(id => id !== movie.id);\n        localStorage.setItem('library', JSON.stringify(currentLibrary));\n        addBtn.textContent = 'Add to library';\n        addBtn.classList.remove('removed');\n      } else {\n        // Film library'de değil, ekle\n        currentLibrary.push(movie.id);\n        localStorage.setItem('library', JSON.stringify(currentLibrary));\n        addBtn.textContent = 'Remove from library';\n        addBtn.classList.add('removed');\n      }\n    };\n\n    // Başlangıç durumunu ayarla\n    if (isInLibrary) {\n      addBtn.textContent = 'Remove from library';\n      addBtn.classList.add('removed');\n    } else {\n      addBtn.textContent = 'Add to library';\n      addBtn.classList.remove('removed');\n    }\n  }\n\n  const closeBtn = popupOverlay.querySelector('.movie-popup-close');\n\n  // Mouse ile üzerine gelince 'hovered' class'ı ekle\n  closeBtn.addEventListener('mouseenter', () => {\n    const icon = closeBtn.querySelector('.close-icon');\n    if (icon) icon.classList.add('hovered');\n  });\n\n  // Mouse çıkınca 'hovered' class'ı kaldır\n  closeBtn.addEventListener('mouseleave', () => {\n    const icon = closeBtn.querySelector('.close-icon');\n    if (icon) icon.classList.remove('hovered');\n  });\n\n  // Kapatma\n  closeBtn.addEventListener('click', () => closeCatalogPopup());\n\n  popupOverlay.addEventListener('mousedown', e => {\n    if (e.target === popupOverlay) {\n      closeCatalogPopup();\n    }\n  });\n\n  // ESC tuşu ile kapatma\n  document.addEventListener('keydown', function (e) {\n    if (e.key === 'Escape') {\n      closeCatalogPopup();\n    }\n  });\n\n  document.body.appendChild(popupSection);\n}\n\n// -----------------------------\n// 3. Popup kapatma fonksiyonu\n// -----------------------------\nexport function closeCatalogPopup() {\n  const popup =\n    document.querySelector('.movie-popup-section') ||\n    document.querySelector('#catalog-popup-template');\n  if (popup) popup.remove();\n}\n","import { fetchDailyTrending, fetchMovieVideos } from '../api/tmdbApi.js';\nimport { openTrailerModal } from './modal-trailer.js';\nimport { createMoviePopup } from './popup.js';\n\nconst heroSection = document.querySelector('.catalog-hero');\nconst titleEl = document.querySelector('.catalog-hero-title');\nconst overviewEl = document.querySelector('.catalog-hero-overview');\nconst ratingEl = document.querySelector('.catalog-hero-rating');\nconst trailerBtn = document.querySelector('.catalog-hero-btn.trailer');\nconst detailsBtn = document.querySelector('.catalog-hero-btn.details');\n\nlet currentMovieId = null;\nlet currentMovieData = null;\n\nasync function renderRandomHeroMovie() {\n  try {\n    const data = await fetchDailyTrending();\n    const movies = data.results;\n\n    if (!movies || movies.length === 0) return;\n\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    currentMovieId = randomMovie.id;\n    currentMovieData = randomMovie;\n\n    const backdrop = randomMovie.backdrop_path || randomMovie.poster_path;\n    const bgUrl = backdrop\n      ? `https://image.tmdb.org/t/p/original${backdrop}`\n      : '';\n\n    if (bgUrl) {\n      heroSection.style.setProperty('--hero-bg', `url(${bgUrl})`);\n    }\n\n    titleEl.textContent = randomMovie.title || randomMovie.name || 'No title';\n    overviewEl.textContent = randomMovie.overview || 'No description available';\n    ratingEl.innerHTML = generateStars(randomMovie.vote_average);\n  } catch (err) {\n    console.error('Hero verisi alınamadı:', err);\n  }\n}\n\nfunction generateStars(voteAverage) {\n  const fullStars = Math.floor(voteAverage / 2);\n  const halfStar = voteAverage % 2 >= 1 ? '½' : '';\n  return (\n    '★'.repeat(fullStars) +\n    (halfStar ? '★' : '') +\n    '☆'.repeat(5 - fullStars - (halfStar ? 1 : 0))\n  );\n}\n\nasync function handleTrailerClick() {\n  if (!currentMovieId) return;\n\n  try {\n    const data = await fetchMovieVideos(currentMovieId);\n    const trailer = data.results.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n\n    if (trailer) {\n      openTrailerModal(trailer.key);\n    } else {\n      alert('Trailer not found.');\n    }\n  } catch (err) {\n    console.error('Trailer yüklenemedi:', err);\n  }\n}\n\ntrailerBtn.addEventListener('click', handleTrailerClick);\n\ndetailsBtn.addEventListener('click', () => {\n  if (currentMovieData) {\n    createMoviePopup(currentMovieData);\n  }\n});\n\nrenderRandomHeroMovie();\n","import {\n  fetchPopularMovies,\n  fetchDailyTrending,\n  fetchWeeklyTrending,\n  fetchUpcomingMovies,\n  searchMovies,\n  fetchGenres,\n} from '../api/tmdbApi.js';\nimport { createMoviePopup } from './popup.js';\n\nconsole.log('catalog.js yüklendi!');\n\nconst form = document.getElementById('search-form');\nconst movieList = document.getElementById('movie-list');\nconst noResults = document.getElementById('no-results');\n\n// --- Pagination ---\nconst MOVIES_PER_PAGE = 15;\nconst TOTAL_MOVIES = 60;\nconst TMDB_PAGE_SIZE = 20; // TMDB API'nın bir sayfada döndürdüğü film sayısı\nconst totalApiPages = Math.ceil(TOTAL_MOVIES / TMDB_PAGE_SIZE);\nlet allMovies = [];\nlet currentPage = 1;\nlet totalPages = Math.ceil(TOTAL_MOVIES / MOVIES_PER_PAGE);\nlet currentSearchResults = null;\n\n// Pagination container\nlet paginationContainer = document.createElement('div');\npaginationContainer.className = 'pagination-container';\n\n// enableMoviePopups fonksiyonu kaldırıldı çünkü createMovieCard içinde zaten tıklama olayı var\n\nfunction renderPagination(page, totalPages) {\n  paginationContainer.innerHTML = '';\n  // Ok butonları için özel fonksiyon\n  function addArrowBtn(direction, disabled) {\n    const btn = document.createElement('button');\n    btn.className = 'pagination-arrow';\n    btn.disabled = disabled;\n    let arrowSvg = '';\n    if (direction === 'prev') {\n      arrowSvg = `<svg viewBox=\"0 0 28 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.9375 6.125L10.0625 14L17.9375 21.875\" stroke=\"#B7B7B7\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" /></svg>`;\n    } else {\n      arrowSvg = `<svg viewBox=\"0 0 28 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.0625 21.875L17.9375 14L10.0625 6.125\" stroke=\"#B7B7B7\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" /></svg>`;\n    }\n    btn.innerHTML = arrowSvg;\n    paginationContainer.appendChild(btn);\n    return btn;\n  }\n  function addPageBtn(num, isActive) {\n    const btn = document.createElement('button');\n    btn.className = 'pagination-page' + (isActive ? ' active' : '');\n    btn.textContent = num;\n    btn.addEventListener('click', () => changePage(num));\n    paginationContainer.appendChild(btn);\n  }\n  // Oklar ve sayfa numaraları\n  const prevBtn = addArrowBtn('prev', page === 1);\n  prevBtn.addEventListener('click', () => changePage(page - 1));\n  for (let i = 1; i <= totalPages; i++) {\n    addPageBtn(i, page === i);\n  }\n  const nextBtn = addArrowBtn('next', page === totalPages);\n  nextBtn.addEventListener('click', () => changePage(page + 1));\n}\n\nfunction changePage(newPage) {\n  if (newPage < 1 || newPage > totalPages) return;\n  currentPage = newPage;\n  const movieArray = currentSearchResults || allMovies;\n  renderMovies(getMoviesForPage(currentPage, movieArray));\n  renderPagination(currentPage, totalPages);\n}\n\nfunction getMoviesForPage(page, movieArray = allMovies) {\n  const start = (page - 1) * MOVIES_PER_PAGE;\n  return movieArray.slice(start, start + MOVIES_PER_PAGE);\n}\n\n// YILDIZLAR İÇİN SVG'Yİ JS İLE OLUŞTUR\nfunction getStarIcons(vote) {\n  const fullStars = Math.floor(vote / 2);\n  const halfStar = vote % 2 >= 1 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStar;\n\n  // Dolu yıldız\n  const starSvg = `<svg class=\"movie-catalog-star-icon\" viewBox=\"0 0 24 24\" style=\"margin-right:4px;vertical-align:middle;\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"#f87719\" stroke=\"#f87719\" stroke-width=\"1.2\"/></svg>`;\n  // Yarım yıldız (solu turuncu, sağı boş, kenarlık turuncu)\n  const halfStarSvg = `<svg class=\"movie-catalog-star-icon\" viewBox=\"0 0 24 24\" style=\"margin-right:4px;vertical-align:middle;\"><defs><linearGradient id=\"half-grad\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\"><stop offset=\"50%\" stop-color=\"#f87719\"/><stop offset=\"50%\" stop-color=\"transparent\"/></linearGradient></defs><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"url(#half-grad)\" stroke=\"#f87719\" stroke-width=\"1.2\"/></svg>`;\n  // Boş yıldız (sadece kenar çizgisi turuncu, içi boş)\n  const emptyStarSvg = `<svg class=\"movie-catalog-star-icon\" viewBox=\"0 0 24 24\" style=\"margin-right:4px;vertical-align:middle;\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"none\" stroke=\"#f87719\" stroke-width=\"1.2\"/></svg>`;\n\n  return (\n    starSvg.repeat(fullStars) +\n    halfStarSvg.repeat(halfStar) +\n    emptyStarSvg.repeat(emptyStars)\n  );\n}\n\n// Film kartı oluşturucu\nfunction createMovieCard(movie, genreMap) {\n  const li = document.createElement('li');\n  li.classList.add('movie-item', 'movie-catalog-item');\n\n  const imgSrc = movie.poster_path\n    ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n    : 'https://via.placeholder.com/300x450?text=No+Image';\n\n  const releaseYear = movie.release_date?.split('-')[0] || 'Bilinmiyor';\n  const rating = movie.vote_average || 0;\n  // Genre isimleri\n  let genreNames = 'Tür bilinmiyor';\n  if (movie.genre_ids && genreMap) {\n    genreNames = movie.genre_ids.map(id => genreMap[id] || id).join(', ');\n  } else if (movie.genres && Array.isArray(movie.genres)) {\n    genreNames = movie.genres.map(g => g.name).join(', ');\n  }\n  const stars = getStarIcons(rating);\n\n  li.innerHTML = `\n    <img src=\"${imgSrc}\" alt=\"${movie.title}\" class=\"catalog-film-poster\" />\n    <div class=\"catalog-overlay\">\n      <h3 class=\"catalog-film-title\">${movie.title}</h3>\n      <div class=\"movie-catalog-bottom-row\">\n        <p class=\"movie-catalog-film-info\">${genreNames} | ${releaseYear}</p>\n        <div class=\"movie-catalog-stars\">${stars}</div>\n      </div>\n    </div>\n  `;\n\n  // Popup açmak için tıklama\n  li.addEventListener('click', () => {\n    if (typeof createMoviePopup === 'function') {\n      createMoviePopup(movie, genreMap);\n    }\n  });\n\n  return li;\n}\n\n// renderMovies fonksiyonunu güncelle\nfunction renderMovies(movies) {\n  movieList.innerHTML = '';\n  if (!movies || movies.length === 0) {\n    noResults.style.display = 'block';\n    paginationContainer.style.display = 'none';\n    return;\n  }\n  noResults.style.display = 'none';\n  paginationContainer.style.display = '';\n  // Genre map'i hazırla\n  if (!window._genreMap) window._genreMap = null;\n  const genreMap = window._genreMap;\n  movies.forEach(movie => {\n    const li = createMovieCard(movie, genreMap);\n    li._movieData = movie;\n    movieList.appendChild(li);\n  });\n}\n\n// Genre map'i başta doldur (initCatalog içinde)\nasync function ensureGenreMap() {\n  if (window._genreMap) return window._genreMap;\n  if (typeof fetchGenres === 'function') {\n    const data = await fetchGenres();\n    console.log('fetchGenres sonucu:', data);\n    const map = {};\n    if (data.genres && Array.isArray(data.genres)) {\n      data.genres.forEach(g => {\n        map[g.id] = g.name;\n      });\n    }\n    window._genreMap = map;\n    return map;\n  }\n  return null;\n}\n\n// Custom year dropdown\nlet selectedYear = '';\nconst yearDropdown = document.querySelector('.year-dropdown');\nyearDropdown.style.display = 'none';\nconst yearSelected = yearDropdown.querySelector('.year-selected');\nconst yearOptions = yearDropdown.querySelector('.year-options');\nconst yearLabel = yearDropdown.querySelector('.year-label');\n\nconst currentYear = new Date().getFullYear();\nfor (let y = currentYear; y >= 1900; y--) {\n  const li = document.createElement('li');\n  li.textContent = y;\n  li.addEventListener('click', () => {\n    selectedYear = y;\n    yearLabel.textContent = y;\n    yearOptions.classList.add('hidden');\n  });\n  yearOptions.appendChild(li);\n}\n\nyearSelected.addEventListener('click', e => {\n  e.stopPropagation();\n  yearOptions.classList.toggle('hidden');\n});\n\ndocument.addEventListener('click', e => {\n  if (!yearDropdown.contains(e.target)) {\n    yearOptions.classList.add('hidden');\n  }\n});\n\n// Arama inputuna çarpı (clear) butonu ekle\nfunction addSearchClearButton() {\n  const searchInput = document.getElementById('search-input');\n  if (!searchInput) return;\n  // Eğer zaten bir wrapper yoksa, inputu bir wrapper ile sar\n  if (!searchInput.parentNode.classList.contains('search-input-wrapper')) {\n    const wrapper = document.createElement('div');\n    wrapper.className = 'search-input-wrapper';\n    searchInput.parentNode.insertBefore(wrapper, searchInput);\n    wrapper.appendChild(searchInput);\n  }\n  const wrapper = searchInput.parentNode;\n  // Eğer zaten eklenmişse tekrar ekleme\n  if (wrapper.querySelector('.search-clear-btn')) return;\n  const clearBtn = document.createElement('button');\n  clearBtn.type = 'button';\n  clearBtn.className = 'search-clear-btn';\n  clearBtn.innerHTML = `\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M13.5 4.5L4.5 13.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      <path d=\"M4.5 4.5L13.5 13.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n    </svg>\n  `;\n  clearBtn.style.display = 'none'; // Başta gizli\n  clearBtn.addEventListener('click', () => {\n    searchInput.value = '';\n    searchInput.focus();\n    clearBtn.style.display = 'none';\n  });\n  wrapper.appendChild(clearBtn);\n  // Input eventleriyle butonu göster/gizle\n  searchInput.addEventListener('input', () => {\n    clearBtn.style.display = searchInput.value ? 'flex' : 'none';\n  });\n  // Sayfa yüklenince de kontrol et\n  clearBtn.style.display = searchInput.value ? 'flex' : 'none';\n}\n\n// Otomatik başlat\ndocument.addEventListener('DOMContentLoaded', () => {\n  initCatalog();\n  addSearchClearButton();\n});\n\nexport async function initCatalog() {\n  console.log('initCatalog fonksiyonu çağrıldı!');\n  if (!form || !movieList || !noResults) {\n    console.error('Catalog için gerekli DOM elemanları bulunamadı!');\n    return;\n  }\n\n  try {\n    // Sadece popüler filmlerden 60 film çek\n    let allFetchedMovies = [];\n    for (let i = 1; i <= totalApiPages; i++) {\n      const data = await fetchPopularMovies(i);\n      allFetchedMovies = allFetchedMovies.concat(data.results);\n    }\n    allMovies = allFetchedMovies.slice(0, TOTAL_MOVIES);\n    totalPages = Math.ceil(allMovies.length / MOVIES_PER_PAGE);\n    currentPage = 1;\n    // --- TEST: Genre map geliyor mu? ---\n    const testGenreMap = await ensureGenreMap();\n    console.log('Genre map:', testGenreMap);\n    // --- TEST SONU ---\n    renderMovies(getMoviesForPage(currentPage));\n    renderPagination(currentPage, totalPages);\n    // Pagination'ı movieList'in hemen altına ekle\n    if (!paginationContainer.parentNode) {\n      movieList.parentNode.insertBefore(\n        paginationContainer,\n        movieList.nextSibling\n      );\n    }\n\n    // Arama formu submit\n    form.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      const query = document.getElementById('search-input').value.trim();\n      const year = selectedYear;\n\n      if (!query) return;\n\n      try {\n        const data = await searchMovies(query);\n        let filteredResults = data.results;\n\n        if (year) {\n          filteredResults = filteredResults.filter(\n            m => m.release_date && m.release_date.startsWith(year)\n          );\n        }\n\n        currentSearchResults = filteredResults;\n        totalPages = Math.ceil(filteredResults.length / MOVIES_PER_PAGE);\n        currentPage = 1;\n        renderMovies(getMoviesForPage(currentPage, currentSearchResults));\n        renderPagination(currentPage, totalPages);\n        yearDropdown.style.display = 'inline-block'; // Sadece arama sonrası göster\n        form.classList.add('active'); // Sadece arama sonrası üçlü blok ortala\n\n        if (filteredResults.length === 0) {\n          noResults.style.display = 'block';\n        } else {\n          noResults.style.display = 'none';\n        }\n      } catch (error) {\n        console.error('Arama sırasında hata oluştu:', error);\n        noResults.style.display = 'block';\n        noResults.textContent = 'Film bulunamadı veya bir hata oluştu.';\n        yearDropdown.style.display = 'inline-block'; // Hata olsa bile göster\n        form.classList.add('active'); // Hata olsa bile üçlü blok ortala\n      }\n    });\n  } catch (error) {\n    console.error('Filmler yüklenirken hata:', error);\n    noResults.style.display = 'block';\n    noResults.textContent = 'Filmler yüklenirken hata oluştu.';\n  }\n}\n"],"names":["modal","iframe","closeButtons","openTrailerModal","videoKey","closeTrailerModal","btn","createMoviePopup","movie","genreMap","template","popupPath","res","html","tempDiv","popupSection","showCatalogPopupFromTemplate","error","popupOverlay","img","genreText","g","id","addBtn","isInLibrary","currentLibrary","closeBtn","icon","closeCatalogPopup","e","popup","heroSection","titleEl","overviewEl","ratingEl","trailerBtn","detailsBtn","currentMovieId","currentMovieData","renderRandomHeroMovie","movies","fetchDailyTrending","randomMovie","backdrop","bgUrl","generateStars","err","voteAverage","fullStars","halfStar","handleTrailerClick","trailer","fetchMovieVideos","v","form","movieList","noResults","MOVIES_PER_PAGE","TOTAL_MOVIES","TMDB_PAGE_SIZE","totalApiPages","allMovies","currentPage","totalPages","currentSearchResults","paginationContainer","renderPagination","page","addArrowBtn","direction","disabled","arrowSvg","addPageBtn","num","isActive","changePage","i","newPage","renderMovies","getMoviesForPage","movieArray","start","getStarIcons","vote","emptyStars","createMovieCard","li","imgSrc","releaseYear","rating","genreNames","stars","ensureGenreMap","fetchGenres","data","map","selectedYear","yearDropdown","yearSelected","yearOptions","yearLabel","currentYear","y","addSearchClearButton","searchInput","wrapper","clearBtn","initCatalog","allFetchedMovies","fetchPopularMovies","testGenreMap","query","year","filteredResults","searchMovies","m"],"mappings":"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"}