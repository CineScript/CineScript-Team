(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function G(){const e=document.getElementById("menuToggleBtn"),t=document.getElementById("mainNav"),n=document.getElementById("menuOverlay");e.addEventListener("click",()=>{t.classList.toggle("open"),n.classList.toggle("active")}),n.addEventListener("click",()=>{t.classList.remove("open"),n.classList.remove("active")});const a=document.querySelectorAll(".nav-link"),r=window.location.pathname.split("/").pop();a.forEach(c=>{c.getAttribute("href")===r?c.classList.add("active"):c.classList.remove("active"),c.addEventListener("click",()=>{a.forEach(u=>u.classList.remove("active")),c.classList.add("active")})});const o=document.documentElement,s=document.querySelector(".theme-icon"),i=localStorage.getItem("theme");i?(o.setAttribute("data-theme",i),d(i)):(o.setAttribute("data-theme","dark"),d("dark")),document.getElementById("themeToggleBtn").addEventListener("click",()=>{const u=o.getAttribute("data-theme")==="dark"?"light":"dark";o.setAttribute("data-theme",u),localStorage.setItem("theme",u),d(u),console.log("Tema değişti:",u)});function d(c){const u=c==="dark"?"./img/svg/dark.svg":"./img/svg/light.svg";s.setAttribute("src",u)}}G();const f="2609725f661288e9b08bc0d62455b671",y="https://api.themoviedb.org/3";async function H(e=1){return await(await fetch(`${y}/movie/popular?api_key=${f}&page=${e}`)).json()}async function ie(){return await(await fetch(`${y}/trending/movie/day?api_key=${f}`)).json()}async function le(){return await(await fetch(`${y}/trending/movie/week?api_key=${f}`)).json()}async function ce(){return await(await fetch(`${y}/movie/upcoming?api_key=${f}`)).json()}async function de(e){return await(await fetch(`${y}/movie/${e}?api_key=${f}`)).json()}async function ue(e){return await(await fetch(`${y}/movie/${e}/videos?api_key=${f}`)).json()}async function R(e,t=""){return await(await fetch(`${y}/search/movie?api_key=${f}&query=${encodeURIComponent(e)}&year=${t}`)).json()}async function _(){return await(await fetch(`${y}/genre/movie/list?api_key=${f}`)).json()}const Y=document.getElementById("team-btn"),w=document.getElementById("team-modal"),U=document.getElementById("modal-close");let p=0;function I(e){document.querySelectorAll(".slide").forEach((n,a)=>{n.classList.remove("active"),a===e&&n.classList.add("active")})}Y.addEventListener("click",()=>{p=0,I(p),w.style.display="flex"});U.addEventListener("click",()=>{w.style.display="none"});window.addEventListener("keydown",e=>{e.key==="Escape"&&(w.style.display="none")});w.addEventListener("click",e=>{e.target===w&&(w.style.display="none")});document.querySelector(".prev-slide").addEventListener("click",()=>{const e=document.querySelectorAll(".slide");p=(p-1+e.length)%e.length,I(p)});document.querySelector(".next-slide").addEventListener("click",()=>{const e=document.querySelectorAll(".slide");p=(p+1)%e.length,I(p)});const V="data:image/svg+xml,%3csvg%20class='popup-close-icon'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%3e%3cpath%20d='M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'/%3e%3cpath%20d='M6%2018L18%206'%20stroke='currentColor'%20stroke-width='2'/%3e%3c/svg%3e%3c/button%3e";let E=null;async function z(){if(E)return E;const e=await _();return E={},e.genres&&Array.isArray(e.genres)&&e.genres.forEach(t=>{E[t.id]=t.name}),E}function T(){const e=localStorage.getItem("library");return e?JSON.parse(e):[]}function J(e){localStorage.setItem("library",JSON.stringify(e))}function K(e,t){let n=T();const a=e.id;n.includes(a)?(n=n.filter(r=>r!==a),t.textContent="Add to library",t.classList.remove("removed")):(n.push(a),t.textContent="Remove from my library",t.classList.add("removed")),J(n)}function O(e,t){T().includes(e.id)?(t.textContent="Remove from my library",t.classList.add("removed")):(t.textContent="Add to library",t.classList.remove("removed"))}async function C(e){let t=document.querySelector("#popup-template");if(!t){const a=window.location.hostname==="localhost";let r;a?r="/popup.html":r=`/${window.location.pathname.split("/")[1]}/popup.html`,fetch(r).then(o=>{if(!o.ok)throw console.error(`Popup.html yüklenemedi. Durum: ${o.status}, URL: ${o.url}`),new Error("Network response was not ok.");return o.text()}).then(async o=>{const s=document.createElement("div");s.innerHTML=o;const i=s.querySelector(".movie-popup-overlay");i?(i.id="popup-template",document.body.appendChild(i),await P(i,e)):console.error("movie-popup-overlay bulunamadı, HTML içeriği yanlış olabilir.")}).catch(o=>{console.error("Popup yüklenirken bir hata oluştu:",o)});return}const n=t.cloneNode(!0);n.id="",await P(n,e)}async function P(e,t){e.style.display="flex",document.body.style.overflow="hidden";let n=!1;function a(){n||(n=!0,e.parentNode&&e.parentNode.removeChild(e),document.body.style.overflow="")}const r=e.querySelector(".movie-popup-img");r.src=t.poster_path?`https://image.tmdb.org/t/p/original${t.poster_path}`:"",r.alt=t.title,e.querySelector(".movie-popup-title").textContent=t.title;const o=t.vote_average!=null?t.vote_average.toFixed(1):"-";e.querySelector(".vote-avg").textContent=o,e.querySelector(".vote-count").textContent=t.vote_count??"-";const s=t.popularity!=null?t.popularity.toFixed(1):"-";e.querySelector(".popularity-value").textContent=s;let i="-";if(t.genre_names&&Array.isArray(t.genre_names))i=t.genre_names.join(", ");else if(t.genre_ids&&Array.isArray(t.genre_ids)){const v=await z();i=t.genre_ids.map(N=>v[N]||N).join(", ")}e.querySelector(".genre-value").textContent=i,e.querySelector(".about-value").textContent=t.overview||"No description.";const l=e.querySelector(".movie-popup-add-btn");l&&(O(t,l),l.addEventListener("click",function(){K(t,this)}));const d=e.querySelector(".movie-popup-close");d.innerHTML="";let c=d.querySelector("img");c||(c=document.createElement("img"),c.alt="close",c.className="close-icon",c.width=24,c.height=24,c.style.width="24px",c.style.height="24px",c.src=V,d.appendChild(c)),d.onclick=null,d.addEventListener("click",function(v){v.preventDefault(),v.stopPropagation(),a()}),e.onclick=null,e.addEventListener("click",function(v){v.target===e&&a()});const u=document.querySelector(".movie-popup-overlay");u&&u.remove(),document.body.appendChild(e)}console.log("catalog.js yüklendi!");const S=document.getElementById("search-form"),g=document.getElementById("movie-list"),m=document.getElementById("no-results"),b=15,q=60,W=20,Z=Math.ceil(q/W);let A=[],L=1,x=Math.ceil(q/b),k=document.createElement("div");k.className="pagination-container";function Q(){g.addEventListener("click",e=>{const t=e.target.closest("li.movie-item");if(!t)return;const n=Array.from(g.children).indexOf(t),r=Array.from(g.children).map(o=>o._movieData).filter(Boolean)[n];r&&C(r)})}function j(e,t){k.innerHTML="";function n(s,i){const l=document.createElement("button");l.className="pagination-arrow",l.disabled=i;let d="";return s==="prev"?d='<svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.9375 6.125L10.0625 14L17.9375 21.875" stroke="#B7B7B7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>':d='<svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.0625 21.875L17.9375 14L10.0625 6.125" stroke="#B7B7B7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>',l.innerHTML=d,k.appendChild(l),l}function a(s,i){const l=document.createElement("button");l.className="pagination-page"+(i?" active":""),l.textContent=s,l.addEventListener("click",()=>B(s)),k.appendChild(l)}n("prev",e===1).addEventListener("click",()=>B(e-1));for(let s=1;s<=t;s++)a(s,e===s);n("next",e===t).addEventListener("click",()=>B(e+1))}function B(e){e<1||e>x||(L=e,$(D(L)),j(L,x))}function D(e){const t=(e-1)*b;return A.slice(t,t+b)}function X(e){const t=Math.floor(e/2),n=e%2>=1?1:0,a=5-t-n;return'<svg class="movie-catalog-star-icon" viewBox="0 0 24 24" style="margin-right:4px;vertical-align:middle;"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="#f87719" stroke="#f87719" stroke-width="1.2"/></svg>'.repeat(t)+'<svg class="movie-catalog-star-icon" viewBox="0 0 24 24" style="margin-right:4px;vertical-align:middle;"><defs><linearGradient id="half-grad" x1="0" x2="1" y1="0" y2="0"><stop offset="50%" stop-color="#f87719"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="url(#half-grad)" stroke="#f87719" stroke-width="1.2"/></svg>'.repeat(n)+'<svg class="movie-catalog-star-icon" viewBox="0 0 24 24" style="margin-right:4px;vertical-align:middle;"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="none" stroke="#f87719" stroke-width="1.2"/></svg>'.repeat(a)}function ee(e,t){const n=document.createElement("li");n.classList.add("movie-item","movie-catalog-item");const a=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/300x450?text=No+Image",r=e.release_date?.split("-")[0]||"Bilinmiyor",o=e.vote_average||0;let s="Tür bilinmiyor";e.genre_ids&&t?s=e.genre_ids.map(l=>t[l]||l).join(", "):e.genres&&Array.isArray(e.genres)&&(s=e.genres.map(l=>l.name).join(", "));const i=X(o);return n.innerHTML=`
    <img src="${a}" alt="${e.title}" class="catalog-film-poster" />
    <div class="catalog-overlay">
      <h3 class="catalog-film-title">${e.title}</h3>
      <div class="movie-catalog-bottom-row">
        <p class="movie-catalog-film-info">${s} | ${r}</p>
        <div class="movie-catalog-stars">${i}</div>
      </div>
    </div>
  `,n.addEventListener("click",()=>{typeof C=="function"&&C(e)}),n}function $(e){if(g.innerHTML="",!e||e.length===0){m.style.display="block";return}m.style.display="none",window._genreMap||(window._genreMap=null);const t=window._genreMap;e.forEach(n=>{const a=ee(n,t);a._movieData=n,g.appendChild(a)})}async function te(){if(window._genreMap)return window._genreMap;if(typeof _=="function"){const e=await _();console.log("fetchGenres sonucu:",e);const t={};return e.genres&&Array.isArray(e.genres)&&e.genres.forEach(n=>{t[n.id]=n.name}),window._genreMap=t,t}return null}let F="";const h=document.querySelector(".year-dropdown");h.style.display="none";const ne=h.querySelector(".year-selected"),M=h.querySelector(".year-options"),oe=h.querySelector(".year-label"),re=new Date().getFullYear();for(let e=re;e>=1900;e--){const t=document.createElement("li");t.textContent=e,t.addEventListener("click",()=>{F=e,oe.textContent=e,M.classList.add("hidden")}),M.appendChild(t)}ne.addEventListener("click",e=>{e.stopPropagation(),M.classList.toggle("hidden")});document.addEventListener("click",e=>{h.contains(e.target)||M.classList.add("hidden")});function ae(){const e=document.getElementById("search-input");if(!e)return;if(!e.parentNode.classList.contains("search-input-wrapper")){const a=document.createElement("div");a.className="search-input-wrapper",e.parentNode.insertBefore(a,e),a.appendChild(e)}const t=e.parentNode;if(t.querySelector(".search-clear-btn"))return;const n=document.createElement("button");n.type="button",n.className="search-clear-btn",n.innerHTML=`
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M13.5 4.5L4.5 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
      <path d="M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  `,n.style.display="none",n.addEventListener("click",()=>{e.value="",e.focus(),n.style.display="none"}),t.appendChild(n),e.addEventListener("input",()=>{n.style.display=e.value?"flex":"none"}),n.style.display=e.value?"flex":"none"}document.addEventListener("DOMContentLoaded",()=>{se(),Q(),ae()});async function se(){if(console.log("initCatalog fonksiyonu çağrıldı!"),!S||!g||!m){console.error("Catalog için gerekli DOM elemanları bulunamadı!");return}try{let e=[];for(let n=1;n<=Z;n++){const a=await H(n);e=e.concat(a.results)}A=e.slice(0,q),x=Math.ceil(A.length/b),L=1;const t=await te();console.log("Genre map:",t),$(D(L)),j(L,x),k.parentNode||g.parentNode.insertBefore(k,g.nextSibling),S.addEventListener("submit",async n=>{n.preventDefault();const a=document.getElementById("search-input").value.trim(),r=F;if(a)try{let s=(await R(a)).results;r&&(s=s.filter(i=>i.release_date&&i.release_date.startsWith(r))),$(s),h.style.display="inline-block",S.classList.add("active"),s.length===0?m.style.display="block":m.style.display="none"}catch(o){console.error("Arama sırasında hata oluştu:",o),m.style.display="block",m.textContent="Film bulunamadı veya bir hata oluştu.",h.style.display="inline-block",S.classList.add("active")}})}catch(e){console.error("Filmler yüklenirken hata:",e),m.style.display="block",m.textContent="Filmler yüklenirken hata oluştu."}}export{H as a,ue as b,_ as c,de as d,le as e,ie as f,ce as g,C as h,se as i};
//# sourceMappingURL=catalog-BZjL9hnS.js.map
