(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function F(){const e=document.getElementById("menuToggleBtn"),t=document.getElementById("mainNav"),n=document.getElementById("menuOverlay");e.addEventListener("click",()=>{t.classList.toggle("open"),n.classList.toggle("active")}),n.addEventListener("click",()=>{t.classList.remove("open"),n.classList.remove("active")});const a=document.querySelectorAll(".nav-link"),r=window.location.pathname.split("/").pop();a.forEach(c=>{c.getAttribute("href")===r?c.classList.add("active"):c.classList.remove("active"),c.addEventListener("click",()=>{a.forEach(d=>d.classList.remove("active")),c.classList.add("active")})});const o=document.documentElement,s=document.querySelector(".theme-icon"),i=localStorage.getItem("theme");i?(o.setAttribute("data-theme",i),m(i)):(o.setAttribute("data-theme","dark"),m("dark")),document.getElementById("themeToggleBtn").addEventListener("click",()=>{const d=o.getAttribute("data-theme")==="dark"?"light":"dark";o.setAttribute("data-theme",d),localStorage.setItem("theme",d),m(d),console.log("Tema değişti:",d)});function m(c){const d=c==="dark"?"./img/svg/dark.svg":"./img/svg/light.svg";s.setAttribute("src",d)}}F();const f="2609725f661288e9b08bc0d62455b671",h="https://api.themoviedb.org/3";async function G(e=1){return await(await fetch(`${h}/movie/popular?api_key=${f}&page=${e}`)).json()}async function se(){return await(await fetch(`${h}/trending/movie/day?api_key=${f}`)).json()}async function ie(){return await(await fetch(`${h}/trending/movie/week?api_key=${f}`)).json()}async function le(){return await(await fetch(`${h}/movie/upcoming?api_key=${f}`)).json()}async function ce(e){return await(await fetch(`${h}/movie/${e}?api_key=${f}`)).json()}async function de(e){return await(await fetch(`${h}/movie/${e}/videos?api_key=${f}`)).json()}async function H(e,t=""){return await(await fetch(`${h}/search/movie?api_key=${f}&query=${encodeURIComponent(e)}&year=${t}`)).json()}async function _(){return await(await fetch(`${h}/genre/movie/list?api_key=${f}`)).json()}const R=document.getElementById("team-btn"),v=document.getElementById("team-modal"),Y=document.getElementById("modal-close");let p=0;function I(e){document.querySelectorAll(".slide").forEach((n,a)=>{n.classList.remove("active"),a===e&&n.classList.add("active")})}R.addEventListener("click",()=>{p=0,I(p),v.style.display="flex"});Y.addEventListener("click",()=>{v.style.display="none"});window.addEventListener("keydown",e=>{e.key==="Escape"&&(v.style.display="none")});v.addEventListener("click",e=>{e.target===v&&(v.style.display="none")});document.querySelector(".prev-slide").addEventListener("click",()=>{const e=document.querySelectorAll(".slide");p=(p-1+e.length)%e.length,I(p)});document.querySelector(".next-slide").addEventListener("click",()=>{const e=document.querySelectorAll(".slide");p=(p+1)%e.length,I(p)});const M="data:image/svg+xml,%3csvg%20class='popup-close-icon'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%3e%3cpath%20d='M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'/%3e%3cpath%20d='M6%2018L18%206'%20stroke='currentColor'%20stroke-width='2'/%3e%3c/svg%3e%3c/button%3e",O="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2011.25L0.75%200.75M11.25%200.75L0.75%2011.25'%20stroke='%23F87719'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";let k=null;async function U(){if(k)return k;const e=await _();return k={},e.genres&&Array.isArray(e.genres)&&e.genres.forEach(t=>{k[t.id]=t.name}),k}function T(){const e=localStorage.getItem("library");return e?JSON.parse(e):[]}function V(e){localStorage.setItem("library",JSON.stringify(e))}function z(e,t){let n=T();const a=e.id;n.includes(a)?(n=n.filter(r=>r!==a),t.textContent="Add to library",t.classList.remove("removed")):(n.push(a),t.textContent="Remove from my library",t.classList.add("removed")),V(n)}function J(e,t){T().includes(e.id)?(t.textContent="Remove from my library",t.classList.add("removed")):(t.textContent="Add to library",t.classList.remove("removed"))}async function C(e){let t=document.querySelector("#popup-template");if(!t){const a=window.location.hostname==="localhost";let r;a?r="/popup.html":r=`/${window.location.pathname.split("/")[1]}/popup.html`,fetch(r).then(o=>{if(!o.ok)throw console.error(`Popup.html yüklenemedi. Durum: ${o.status}, URL: ${o.url}`),new Error("Network response was not ok.");return o.text()}).then(async o=>{const s=document.createElement("div");s.innerHTML=o;const i=s.querySelector(".movie-popup-overlay");i?(i.id="popup-template",document.body.appendChild(i),await N(i,e)):console.error("movie-popup-overlay bulunamadı, HTML içeriği yanlış olabilir.")}).catch(o=>{console.error("Popup yüklenirken bir hata oluştu:",o)});return}const n=t.cloneNode(!0);n.id="",await N(n,e)}async function N(e,t){e.style.display="flex";const n=e.querySelector(".movie-popup-img");n.src=t.poster_path?`https://image.tmdb.org/t/p/original${t.poster_path}`:"",n.alt=t.title,e.querySelector(".movie-popup-title").textContent=t.title;const a=t.vote_average!=null?t.vote_average.toFixed(1):"-";e.querySelector(".vote-avg").textContent=a,e.querySelector(".vote-count").textContent=t.vote_count??"-";const r=t.popularity!=null?t.popularity.toFixed(1):"-";e.querySelector(".popularity-value").textContent=r;let o="-";if(t.genre_names&&Array.isArray(t.genre_names))o=t.genre_names.join(", ");else if(t.genre_ids&&Array.isArray(t.genre_ids)){const c=await U();o=t.genre_ids.map(d=>c[d]||d).join(", ")}e.querySelector(".genre-value").textContent=o,e.querySelector(".about-value").textContent=t.overview||"No description.";const s=e.querySelector(".movie-popup-add-btn");s&&(J(t,s),s.addEventListener("click",function(){z(t,this)}));const i=e.querySelector(".movie-popup-close");let l=i.querySelector("img");if(l||(l=document.createElement("img"),l.alt="close",l.className="close-icon",l.width=24,l.height=24,l.style.width="24px",l.style.height="24px",l.src=M,i.appendChild(l)),window.location.hostname==="localhost"||window.location.pathname.split("/")[1],i.addEventListener("mouseenter",()=>{i.querySelector("img").src=O}),i.addEventListener("mouseleave",()=>{i.querySelector("img").src=M}),i.addEventListener("click",()=>e.remove()),e.addEventListener("mousedown",function(c){c.target===e&&e.remove()}),document.body.appendChild(e),i){i.innerHTML="";const c=document.createElement("img");c.alt="close",c.className="close-icon",c.width=24,c.height=24,c.style.width="24px",c.style.height="24px",c.src=M,i.appendChild(c)}}console.log("catalog.js yüklendi!");const E=document.getElementById("search-form"),g=document.getElementById("movie-list"),u=document.getElementById("no-results"),S=15,q=60,K=20,W=Math.ceil(q/K);let A=[],w=1,b=Math.ceil(q/S),L=document.createElement("div");L.className="pagination-container";function Z(){g.addEventListener("click",e=>{const t=e.target.closest("li.movie-item");if(!t)return;const n=Array.from(g.children).indexOf(t),r=Array.from(g.children).map(o=>o._movieData).filter(Boolean)[n];r&&C(r)})}function P(e,t){L.innerHTML="";function n(s,i){const l=document.createElement("button");l.className="pagination-arrow",l.disabled=i;let m="";return s==="prev"?m='<svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.9375 6.125L10.0625 14L17.9375 21.875" stroke="#B7B7B7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>':m='<svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.0625 21.875L17.9375 14L10.0625 6.125" stroke="#B7B7B7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>',l.innerHTML=m,L.appendChild(l),l}function a(s,i){const l=document.createElement("button");l.className="pagination-page"+(i?" active":""),l.textContent=s,l.addEventListener("click",()=>B(s)),L.appendChild(l)}n("prev",e===1).addEventListener("click",()=>B(e-1));for(let s=1;s<=t;s++)a(s,e===s);n("next",e===t).addEventListener("click",()=>B(e+1))}function B(e){e<1||e>b||(w=e,$(j(w)),P(w,b))}function j(e){const t=(e-1)*S;return A.slice(t,t+S)}function Q(e){const t=Math.floor(e/2),n=e%2>=1?1:0,a=5-t-n;return'<svg class="movie-catalog-star-icon" viewBox="0 0 24 24" style="margin-right:4px;vertical-align:middle;"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="#f87719" stroke="#f87719" stroke-width="1.2"/></svg>'.repeat(t)+'<svg class="movie-catalog-star-icon" viewBox="0 0 24 24" style="margin-right:4px;vertical-align:middle;"><defs><linearGradient id="half-grad" x1="0" x2="1" y1="0" y2="0"><stop offset="50%" stop-color="#f87719"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="url(#half-grad)" stroke="#f87719" stroke-width="1.2"/></svg>'.repeat(n)+'<svg class="movie-catalog-star-icon" viewBox="0 0 24 24" style="margin-right:4px;vertical-align:middle;"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="none" stroke="#f87719" stroke-width="1.2"/></svg>'.repeat(a)}function X(e,t){const n=document.createElement("li");n.classList.add("movie-item","movie-catalog-item");const a=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/300x450?text=No+Image",r=e.release_date?.split("-")[0]||"Bilinmiyor",o=e.vote_average||0;let s="Tür bilinmiyor";e.genre_ids&&t?s=e.genre_ids.map(l=>t[l]||l).join(", "):e.genres&&Array.isArray(e.genres)&&(s=e.genres.map(l=>l.name).join(", "));const i=Q(o);return n.innerHTML=`
    <img src="${a}" alt="${e.title}" class="catalog-film-poster" />
    <div class="catalog-overlay">
      <h3 class="catalog-film-title">${e.title}</h3>
      <div class="movie-catalog-bottom-row">
        <p class="movie-catalog-film-info">${s} | ${r}</p>
        <div class="movie-catalog-stars">${i}</div>
      </div>
    </div>
  `,n.addEventListener("click",()=>{typeof C=="function"&&C(e)}),n}function $(e){if(g.innerHTML="",!e||e.length===0){u.style.display="block";return}u.style.display="none",window._genreMap||(window._genreMap=null);const t=window._genreMap;e.forEach(n=>{const a=X(n,t);a._movieData=n,g.appendChild(a)})}async function ee(){if(window._genreMap)return window._genreMap;if(typeof _=="function"){const e=await _();console.log("fetchGenres sonucu:",e);const t={};return e.genres&&Array.isArray(e.genres)&&e.genres.forEach(n=>{t[n.id]=n.name}),window._genreMap=t,t}return null}let D="";const y=document.querySelector(".year-dropdown");y.style.display="none";const te=y.querySelector(".year-selected"),x=y.querySelector(".year-options"),ne=y.querySelector(".year-label"),oe=new Date().getFullYear();for(let e=oe;e>=1900;e--){const t=document.createElement("li");t.textContent=e,t.addEventListener("click",()=>{D=e,ne.textContent=e,x.classList.add("hidden")}),x.appendChild(t)}te.addEventListener("click",e=>{e.stopPropagation(),x.classList.toggle("hidden")});document.addEventListener("click",e=>{y.contains(e.target)||x.classList.add("hidden")});function re(){const e=document.getElementById("search-input");if(!e)return;if(!e.parentNode.classList.contains("search-input-wrapper")){const a=document.createElement("div");a.className="search-input-wrapper",e.parentNode.insertBefore(a,e),a.appendChild(e)}const t=e.parentNode;if(t.querySelector(".search-clear-btn"))return;const n=document.createElement("button");n.type="button",n.className="search-clear-btn",n.innerHTML=`
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M13.5 4.5L4.5 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
      <path d="M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  `,n.style.display="none",n.addEventListener("click",()=>{e.value="",e.focus(),n.style.display="none"}),t.appendChild(n),e.addEventListener("input",()=>{n.style.display=e.value?"flex":"none"}),n.style.display=e.value?"flex":"none"}document.addEventListener("DOMContentLoaded",()=>{ae(),Z(),re()});async function ae(){if(console.log("initCatalog fonksiyonu çağrıldı!"),!E||!g||!u){console.error("Catalog için gerekli DOM elemanları bulunamadı!");return}try{let e=[];for(let n=1;n<=W;n++){const a=await G(n);e=e.concat(a.results)}A=e.slice(0,q),b=Math.ceil(A.length/S),w=1;const t=await ee();console.log("Genre map:",t),$(j(w)),P(w,b),L.parentNode||g.parentNode.insertBefore(L,g.nextSibling),E.addEventListener("submit",async n=>{n.preventDefault();const a=document.getElementById("search-input").value.trim(),r=D;if(a)try{let s=(await H(a)).results;r&&(s=s.filter(i=>i.release_date&&i.release_date.startsWith(r))),$(s),y.style.display="inline-block",E.classList.add("active"),s.length===0?u.style.display="block":u.style.display="none"}catch(o){console.error("Arama sırasında hata oluştu:",o),u.style.display="block",u.textContent="Film bulunamadı veya bir hata oluştu.",y.style.display="inline-block",E.classList.add("active")}})}catch(e){console.error("Filmler yüklenirken hata:",e),u.style.display="block",u.textContent="Filmler yüklenirken hata oluştu."}}export{G as a,de as b,_ as c,ce as d,ie as e,se as f,le as g,C as h,ae as i};
//# sourceMappingURL=catalog-PQ8zIsRn.js.map
