{"version":3,"file":"catalog-BZjL9hnS.js","sources":["../../src/js/header.js","../../src/api/tmdbApi.js","../../src/js/footer.js","../../src/img/svg/close.svg","../../src/js/popup.js","../../src/js/catalog.js"],"sourcesContent":["export function initHeader() {\n  const menuBtn = document.getElementById('menuToggleBtn');\n  const mainNav = document.getElementById('mainNav');\n  const overlay = document.getElementById('menuOverlay');\n\n  menuBtn.addEventListener('click', () => {\n    mainNav.classList.toggle('open');\n    overlay.classList.toggle('active');\n  });\n\n  overlay.addEventListener('click', () => {\n    mainNav.classList.remove('open');\n    overlay.classList.remove('active');\n  });\n\n  //  ACTIVE NAV LINK AYARI\n  const navLinks = document.querySelectorAll('.nav-link');\n  const currentPage = window.location.pathname.split('/').pop();\n\n  navLinks.forEach(link => {\n    if (link.getAttribute('href') === currentPage) {\n      link.classList.add('active');\n    } else {\n      link.classList.remove('active');\n    }\n\n    // SPA yapısı yoksa bu kısmı da bırakabiliriz ama zararı yok\n    link.addEventListener('click', () => {\n      navLinks.forEach(l => l.classList.remove('active'));\n      link.classList.add('active');\n    });\n  });\n\n  // TEMA TOGGLE (Dark / Light)\n  const htmlEl = document.documentElement;\n  const themeIcon = document.querySelector('.theme-icon');\n\n  const savedTheme = localStorage.getItem('theme');\n  if (savedTheme) {\n    htmlEl.setAttribute('data-theme', savedTheme);\n    updateIcon(savedTheme);\n  } else {\n    htmlEl.setAttribute('data-theme', 'dark');\n    updateIcon('dark');\n  }\n\n  const themeToggleBtn = document.getElementById('themeToggleBtn');\n\n  themeToggleBtn.addEventListener('click', () => {\n    const currentTheme = htmlEl.getAttribute('data-theme');\n    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\n    htmlEl.setAttribute('data-theme', newTheme);\n    localStorage.setItem('theme', newTheme);\n    updateIcon(newTheme);\n    console.log('Tema değişti:', newTheme);\n  });\n\n  function updateIcon(theme) {\n    const iconPath =\n      theme === 'dark' ? './img/svg/dark.svg' : './img/svg/light.svg';\n    themeIcon.setAttribute('src', iconPath);\n  }\n}\n\ninitHeader();\n","const API_KEY = \"2609725f661288e9b08bc0d62455b671\";\nconst BASE_URL = \"https://api.themoviedb.org/3\";\n\n// Tüm filmler\nexport async function fetchPopularMovies(page = 1) {\n  const res = await fetch(`${BASE_URL}/movie/popular?api_key=${API_KEY}&page=${page}`);\n  return await res.json();\n}\n\n// Günlük trend filmler\nexport async function fetchDailyTrending() {\n  const res = await fetch(`${BASE_URL}/trending/movie/day?api_key=${API_KEY}`);\n  return await res.json();\n}\n\n// Haftalık trend filmler\nexport async function fetchWeeklyTrending() {\n  const res = await fetch(`${BASE_URL}/trending/movie/week?api_key=${API_KEY}`);\n  return await res.json();\n}\n\n// Yeni filmler (upcoming)\nexport async function fetchUpcomingMovies() {\n  const res = await fetch(`${BASE_URL}/movie/upcoming?api_key=${API_KEY}`);\n  return await res.json();\n}\n\n// Film detayları (tek bir film)\nexport async function fetchMovieDetails(movieId) {\n  const res = await fetch(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`);\n  return await res.json();\n}\n\n// Filmin videoları (fragman dahil)\nexport async function fetchMovieVideos(movieId) {\n  const res = await fetch(`${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}`);\n  return await res.json();\n}\n\n// Anahtar kelime + yıla göre arama\nexport async function searchMovies(query, year = \"\") {\n  const res = await fetch(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}&year=${year}`\n  );\n  return await res.json();\n}\n\n// Tür listesini getir\nexport async function fetchGenres() {\n  const res = await fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`);\n  return await res.json();\n}\n\n","const teamBtn = document.getElementById('team-btn');\nconst teamModal = document.getElementById('team-modal');\nconst modalClose = document.getElementById('modal-close');\n\nlet currentSlide = 0;\n\nfunction showSlide(index) {\n  const slides = document.querySelectorAll('.slide');\n  slides.forEach((slide, i) => {\n    slide.classList.remove('active');\n    if (i === index) {\n      slide.classList.add('active');\n    }\n  });\n}\n\nteamBtn.addEventListener('click', () => {\n  currentSlide = 0;\n  showSlide(currentSlide);\n  teamModal.style.display = 'flex';\n});\n\nmodalClose.addEventListener('click', () => {\n  teamModal.style.display = 'none';\n});\n\nwindow.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    teamModal.style.display = 'none';\n  }\n});\n\nteamModal.addEventListener('click', e => {\n  if (e.target === teamModal) {\n    teamModal.style.display = 'none';\n  }\n});\n\ndocument.querySelector('.prev-slide').addEventListener('click', () => {\n  const slides = document.querySelectorAll('.slide');\n  currentSlide = (currentSlide - 1 + slides.length) % slides.length;\n  showSlide(currentSlide);\n});\n\ndocument.querySelector('.next-slide').addEventListener('click', () => {\n  const slides = document.querySelectorAll('.slide');\n  currentSlide = (currentSlide + 1) % slides.length;\n  showSlide(currentSlide);\n});\n","export default \"data:image/svg+xml,%3csvg%20class='popup-close-icon'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%3e%3cpath%20d='M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'/%3e%3cpath%20d='M6%2018L18%206'%20stroke='currentColor'%20stroke-width='2'/%3e%3c/svg%3e%3c/button%3e\"","import {\n  fetchPopularMovies,\n  fetchDailyTrending,\n  fetchWeeklyTrending,\n  fetchUpcomingMovies,\n  searchMovies,\n  fetchGenres,\n  fetchMovieDetails,\n  fetchMovieVideos\n} from \"../api/tmdbApi.js\";\nimport closeSvg from '../img/svg/close.svg';\nimport closeHoverSvg from '../img/svg/close-hover.svg';\n\nlet genreMap = null;\n\nasync function ensureGenreMap() {\n  if (genreMap) return genreMap;\n  const data = await fetchGenres();\n  genreMap = {};\n  if (data.genres && Array.isArray(data.genres)) {\n    data.genres.forEach(g => {\n      genreMap[g.id] = g.name;\n    });\n  }\n  return genreMap;\n}\n\nfunction getLibrary() {\n  const data = localStorage.getItem('library');\n  return data ? JSON.parse(data) : [];\n}\n\nfunction saveLibrary(library) {\n  localStorage.setItem('library', JSON.stringify(library));\n}\n\nfunction toggleLibrary(movie, button) {\n  let library = getLibrary();\n  const movieId = movie.id;\n\n  if (library.includes(movieId)) {\n    library = library.filter(id => id !== movieId);\n    button.textContent = 'Add to library';\n    button.classList.remove('removed');\n  } else {\n    library.push(movieId);\n    button.textContent = 'Remove from my library';\n    button.classList.add('removed');\n  }\n\n  saveLibrary(library);\n}\n\nfunction updateButtonState(movie, button) {\n  const library = getLibrary();\n  if (library.includes(movie.id)) {\n    button.textContent = 'Remove from my library';\n    button.classList.add('removed');\n  } else {\n    button.textContent = 'Add to library';\n    button.classList.remove('removed');\n  }\n}\n\n// YILDIZLAR İÇİN SVG DOSYALARI\nconst ICON_PATHS = {\n  full: './img/svg/star.svg',\n  half: './img/svg/star-half.svg',\n  empty: './img/svg/star-outline.svg',\n};\n\nfunction getStarIcons(vote) {\n  const fullStars = Math.floor(vote / 2);\n  const halfStar = vote % 2 >= 1 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStar;\n\n  return (\n    `<img class=\"star-icon full\" src=\"${ICON_PATHS.full}\" alt=\"star\" />`.repeat(fullStars) +\n    `<img class=\"star-icon half\" src=\"${ICON_PATHS.half}\" alt=\"half star\" />`.repeat(halfStar) +\n    `<img class=\"star-icon empty\" src=\"${ICON_PATHS.empty}\" alt=\"empty star\" />`.repeat(emptyStars)\n  );\n}\n\nexport async function createMoviePopup(movie) {\n  // popup.html'den şablonu klonla\n  let template = document.querySelector('#popup-template');\n  if (!template) {\n    // Eğer template yoksa partials/popup.html'i fetch et ve ekle\n    const isLocal = window.location.hostname === 'localhost';\n    let popupPath;\n\n    if (isLocal) {\n      // Lokal geliştirme için: Public klasöründeki dosyalara '/' ile erişilir\n      popupPath = '/popup.html';\n    } else {\n      // Canlı ortam için: GitHub Pages'da repo adıyla birlikte\n      const repoName = window.location.pathname.split('/')[1];\n      popupPath = `/${repoName}/popup.html`;\n    }\n\n    fetch(popupPath)\n      .then(res => {\n        if (!res.ok) {\n          console.error(`Popup.html yüklenemedi. Durum: ${res.status}, URL: ${res.url}`);\n          throw new Error('Network response was not ok.');\n        }\n        return res.text();\n      })\n      .then(async html => {\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = html;\n        const popupOverlay = tempDiv.querySelector('.movie-popup-overlay');\n        if (popupOverlay) { // Null kontrolü ekledik\n          popupOverlay.id = 'popup-template';\n          document.body.appendChild(popupOverlay);\n          await showPopupFromTemplate(popupOverlay, movie);\n        } else {\n          console.error(\"movie-popup-overlay bulunamadı, HTML içeriği yanlış olabilir.\");\n        }\n      })\n      .catch(error => {\n        console.error(\"Popup yüklenirken bir hata oluştu:\", error);\n      });\n    return;\n  }\n\n  // Template zaten varsa klonla ve göster\n  const popupOverlay = template.cloneNode(true);\n  popupOverlay.id = '';\n  await showPopupFromTemplate(popupOverlay, movie);\n}\n\nlet lastScrollY = 0;\n\nasync function showPopupFromTemplate(popupOverlay, movie) {\n  popupOverlay.style.display = 'flex';\n  document.body.style.overflow = 'hidden';\n\n  // Kapatma fonksiyonu (idempotent)\n  let isClosed = false;\n  function closePopup() {\n    if (isClosed) return;\n    isClosed = true;\n    // Önce popup'ı DOM'dan kaldır\n    if (popupOverlay.parentNode) popupOverlay.parentNode.removeChild(popupOverlay);\n    // Sonra body'nin stilini eski haline getir\n    document.body.style.overflow = '';\n  }\n\n  // Görsel\n  const img = popupOverlay.querySelector('.movie-popup-img');\n  img.src = movie.poster_path ? `https://image.tmdb.org/t/p/original${movie.poster_path}` : '';\n  img.alt = movie.title;\n  // Başlık\n  popupOverlay.querySelector('.movie-popup-title').textContent = movie.title;\n  // Vote/votes\n  const formattedVote = movie.vote_average != null ? movie.vote_average.toFixed(1) : '-';\n  popupOverlay.querySelector('.vote-avg').textContent = formattedVote;\n  popupOverlay.querySelector('.vote-count').textContent = movie.vote_count ?? '-';\n  // Popularity\n  const formattedPopularity = movie.popularity != null ? movie.popularity.toFixed(1) : '-';\n  popupOverlay.querySelector('.popularity-value').textContent = formattedPopularity;\n  // Genre\n  let genreText = '-';\n  if (movie.genre_names && Array.isArray(movie.genre_names)) {\n    genreText = movie.genre_names.join(', ');\n  } else if (movie.genre_ids && Array.isArray(movie.genre_ids)) {\n    const map = await ensureGenreMap();\n    genreText = movie.genre_ids.map(id => map[id] || id).join(', ');\n  }\n  popupOverlay.querySelector('.genre-value').textContent = genreText;\n  // About\n  popupOverlay.querySelector('.about-value').textContent = movie.overview || 'No description.';\n\n  // Buton seçimi ve durumu güncelleme & event ekleme\n  const addBtn = popupOverlay.querySelector('.movie-popup-add-btn');\n  if (addBtn) {\n    updateButtonState(movie, addBtn);\n    addBtn.addEventListener('click', function() {\n      toggleLibrary(movie, this);\n    });\n  }\n\n  // Kapatma butonu\n  const closeBtn = popupOverlay.querySelector('.movie-popup-close');\n  closeBtn.innerHTML = '';\n  // Her iki modda da img ile ekle\n  let closeImg = closeBtn.querySelector('img');\n  if (!closeImg) {\n    closeImg = document.createElement('img');\n    closeImg.alt = 'close';\n    closeImg.className = 'close-icon';\n    closeImg.width = 24;\n    closeImg.height = 24;\n    closeImg.style.width = '24px';\n    closeImg.style.height = '24px';\n    closeImg.src = closeSvg;\n    closeBtn.appendChild(closeImg);\n  }\n\n  // Eski eventleri temizle, yeni event ekle\n  closeBtn.onclick = null;\n  closeBtn.addEventListener('click', function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    closePopup();\n  });\n\n  // Overlay'e tıklayınca popup'ı kapat (event birikmesini önle)\n  popupOverlay.onclick = null;\n  popupOverlay.addEventListener('click', function(e) {\n    if (e.target === popupOverlay) {\n      closePopup();\n    }\n  });\n\n  // Ekrana eklemeden önce eski popup'ı kaldır\n  const oldPopup = document.querySelector('.movie-popup-overlay');\n  if (oldPopup) oldPopup.remove();\n  document.body.appendChild(popupOverlay);\n}","import {\n  fetchPopularMovies,\n  fetchDailyTrending,\n  fetchWeeklyTrending,\n  fetchUpcomingMovies,\n  searchMovies,\n  fetchGenres,\n} from '../api/tmdbApi.js';\nimport { createMoviePopup } from './popup.js';\n\nconsole.log('catalog.js yüklendi!');\n\nconst form = document.getElementById('search-form');\nconst movieList = document.getElementById('movie-list');\nconst noResults = document.getElementById('no-results');\n// yearSelect ile ilgili kodları kaldırdık\n\n// --- Pagination ---\nconst MOVIES_PER_PAGE = 15;\nconst TOTAL_MOVIES = 60;\nconst TMDB_PAGE_SIZE = 20; // TMDB API'nın bir sayfada döndürdüğü film sayısı\nconst totalApiPages = Math.ceil(TOTAL_MOVIES / TMDB_PAGE_SIZE);\nlet allMovies = [];\nlet currentPage = 1;\nlet totalPages = Math.ceil(TOTAL_MOVIES / MOVIES_PER_PAGE);\n\n// Pagination container\nlet paginationContainer = document.createElement('div');\npaginationContainer.className = 'pagination-container';\n\nfunction enableMoviePopups() {\n  movieList.addEventListener('click', e => {\n    const li = e.target.closest('li.movie-item');\n    if (!li) return;\n    const idx = Array.from(movieList.children).indexOf(li);\n    const movies = Array.from(movieList.children)\n      .map(li => li._movieData)\n      .filter(Boolean);\n    const movie = movies[idx];\n    if (movie) createMoviePopup(movie);\n  });\n}\n\nfunction renderPagination(page, totalPages) {\n  paginationContainer.innerHTML = '';\n  // Ok butonları için özel fonksiyon\n  function addArrowBtn(direction, disabled) {\n    const btn = document.createElement('button');\n    btn.className = 'pagination-arrow';\n    btn.disabled = disabled;\n    let arrowSvg = '';\n    if (direction === 'prev') {\n      arrowSvg = `<svg viewBox=\"0 0 28 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.9375 6.125L10.0625 14L17.9375 21.875\" stroke=\"#B7B7B7\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" /></svg>`;\n    } else {\n      arrowSvg = `<svg viewBox=\"0 0 28 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.0625 21.875L17.9375 14L10.0625 6.125\" stroke=\"#B7B7B7\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" /></svg>`;\n    }\n    btn.innerHTML = arrowSvg;\n    paginationContainer.appendChild(btn);\n    return btn;\n  }\n  function addPageBtn(num, isActive) {\n    const btn = document.createElement('button');\n    btn.className = 'pagination-page' + (isActive ? ' active' : '');\n    btn.textContent = num;\n    btn.addEventListener('click', () => changePage(num));\n    paginationContainer.appendChild(btn);\n  }\n  // Oklar ve sayfa numaraları\n  const prevBtn = addArrowBtn('prev', page === 1);\n  prevBtn.addEventListener('click', () => changePage(page - 1));\n  for (let i = 1; i <= totalPages; i++) {\n    addPageBtn(i, page === i);\n  }\n  const nextBtn = addArrowBtn('next', page === totalPages);\n  nextBtn.addEventListener('click', () => changePage(page + 1));\n}\n\nfunction changePage(newPage) {\n  if (newPage < 1 || newPage > totalPages) return;\n  currentPage = newPage;\n  renderMovies(getMoviesForPage(currentPage));\n  renderPagination(currentPage, totalPages);\n}\n\nfunction getMoviesForPage(page) {\n  const start = (page - 1) * MOVIES_PER_PAGE;\n  return allMovies.slice(start, start + MOVIES_PER_PAGE);\n}\n\n// YILDIZLAR İÇİN SVG'Yİ JS İLE OLUŞTUR\nfunction getStarIcons(vote) {\n  const fullStars = Math.floor(vote / 2);\n  const halfStar = vote % 2 >= 1 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStar;\n\n  // Dolu yıldız\n  const starSvg = `<svg class=\"movie-catalog-star-icon\" viewBox=\"0 0 24 24\" style=\"margin-right:4px;vertical-align:middle;\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"#f87719\" stroke=\"#f87719\" stroke-width=\"1.2\"/></svg>`;\n  // Yarım yıldız (solu turuncu, sağı boş, kenarlık turuncu)\n  const halfStarSvg = `<svg class=\"movie-catalog-star-icon\" viewBox=\"0 0 24 24\" style=\"margin-right:4px;vertical-align:middle;\"><defs><linearGradient id=\"half-grad\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\"><stop offset=\"50%\" stop-color=\"#f87719\"/><stop offset=\"50%\" stop-color=\"transparent\"/></linearGradient></defs><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"url(#half-grad)\" stroke=\"#f87719\" stroke-width=\"1.2\"/></svg>`;\n  // Boş yıldız (sadece kenar çizgisi turuncu, içi boş)\n  const emptyStarSvg = `<svg class=\"movie-catalog-star-icon\" viewBox=\"0 0 24 24\" style=\"margin-right:4px;vertical-align:middle;\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"none\" stroke=\"#f87719\" stroke-width=\"1.2\"/></svg>`;\n\n  return (\n    starSvg.repeat(fullStars) +\n    halfStarSvg.repeat(halfStar) +\n    emptyStarSvg.repeat(emptyStars)\n  );\n}\n\n// Film kartı oluşturucu\nfunction createMovieCard(movie, genreMap) {\n  const li = document.createElement('li');\n  li.classList.add('movie-item', 'movie-catalog-item');\n\n  const imgSrc = movie.poster_path\n    ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n    : 'https://via.placeholder.com/300x450?text=No+Image';\n\n  const releaseYear = movie.release_date?.split('-')[0] || 'Bilinmiyor';\n  const rating = movie.vote_average || 0;\n  // Genre isimleri\n  let genreNames = 'Tür bilinmiyor';\n  if (movie.genre_ids && genreMap) {\n    genreNames = movie.genre_ids.map(id => genreMap[id] || id).join(', ');\n  } else if (movie.genres && Array.isArray(movie.genres)) {\n    genreNames = movie.genres.map(g => g.name).join(', ');\n  }\n  const stars = getStarIcons(rating);\n\n  li.innerHTML = `\n    <img src=\"${imgSrc}\" alt=\"${movie.title}\" class=\"catalog-film-poster\" />\n    <div class=\"catalog-overlay\">\n      <h3 class=\"catalog-film-title\">${movie.title}</h3>\n      <div class=\"movie-catalog-bottom-row\">\n        <p class=\"movie-catalog-film-info\">${genreNames} | ${releaseYear}</p>\n        <div class=\"movie-catalog-stars\">${stars}</div>\n      </div>\n    </div>\n  `;\n\n  // Popup açmak için tıklama\n  li.addEventListener('click', () => {\n    if (typeof createMoviePopup === 'function') {\n      createMoviePopup(movie);\n    }\n  });\n\n  return li;\n}\n\n// renderMovies fonksiyonunu güncelle\nfunction renderMovies(movies) {\n  movieList.innerHTML = '';\n  if (!movies || movies.length === 0) {\n    noResults.style.display = 'block';\n    return;\n  }\n  noResults.style.display = 'none';\n  // Genre map'i hazırla\n  if (!window._genreMap) window._genreMap = null;\n  const genreMap = window._genreMap;\n  movies.forEach(movie => {\n    const li = createMovieCard(movie, genreMap);\n    li._movieData = movie;\n    movieList.appendChild(li);\n  });\n}\n\n// Genre map'i başta doldur (initCatalog içinde)\nasync function ensureGenreMap() {\n  if (window._genreMap) return window._genreMap;\n  if (typeof fetchGenres === 'function') {\n    const data = await fetchGenres();\n    console.log('fetchGenres sonucu:', data);\n    const map = {};\n    if (data.genres && Array.isArray(data.genres)) {\n      data.genres.forEach(g => {\n        map[g.id] = g.name;\n      });\n    }\n    window._genreMap = map;\n    return map;\n  }\n  return null;\n}\n\n// Custom year dropdown\nlet selectedYear = '';\nconst yearDropdown = document.querySelector('.year-dropdown');\nyearDropdown.style.display = 'none';\nconst yearSelected = yearDropdown.querySelector('.year-selected');\nconst yearOptions = yearDropdown.querySelector('.year-options');\nconst yearLabel = yearDropdown.querySelector('.year-label');\n\nconst currentYear = new Date().getFullYear();\nfor (let y = currentYear; y >= 1900; y--) {\n  const li = document.createElement('li');\n  li.textContent = y;\n  li.addEventListener('click', () => {\n    selectedYear = y;\n    yearLabel.textContent = y;\n    yearOptions.classList.add('hidden');\n  });\n  yearOptions.appendChild(li);\n}\n\nyearSelected.addEventListener('click', (e) => {\n  e.stopPropagation();\n  yearOptions.classList.toggle('hidden');\n});\n\ndocument.addEventListener('click', (e) => {\n  if (!yearDropdown.contains(e.target)) {\n    yearOptions.classList.add('hidden');\n  }\n});\n\n// Arama inputuna çarpı (clear) butonu ekle\nfunction addSearchClearButton() {\n  const searchInput = document.getElementById('search-input');\n  if (!searchInput) return;\n  // Eğer zaten bir wrapper yoksa, inputu bir wrapper ile sar\n  if (!searchInput.parentNode.classList.contains('search-input-wrapper')) {\n    const wrapper = document.createElement('div');\n    wrapper.className = 'search-input-wrapper';\n    searchInput.parentNode.insertBefore(wrapper, searchInput);\n    wrapper.appendChild(searchInput);\n  }\n  const wrapper = searchInput.parentNode;\n  // Eğer zaten eklenmişse tekrar ekleme\n  if (wrapper.querySelector('.search-clear-btn')) return;\n  const clearBtn = document.createElement('button');\n  clearBtn.type = 'button';\n  clearBtn.className = 'search-clear-btn';\n  clearBtn.innerHTML = `\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M13.5 4.5L4.5 13.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      <path d=\"M4.5 4.5L13.5 13.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n    </svg>\n  `;\n  clearBtn.style.display = 'none'; // Başta gizli\n  clearBtn.addEventListener('click', () => {\n    searchInput.value = '';\n    searchInput.focus();\n    clearBtn.style.display = 'none';\n  });\n  wrapper.appendChild(clearBtn);\n  // Input eventleriyle butonu göster/gizle\n  searchInput.addEventListener('input', () => {\n    clearBtn.style.display = searchInput.value ? 'flex' : 'none';\n  });\n  // Sayfa yüklenince de kontrol et\n  clearBtn.style.display = searchInput.value ? 'flex' : 'none';\n}\n\n// Otomatik başlat\ndocument.addEventListener('DOMContentLoaded', () => {\n  initCatalog();\n  enableMoviePopups();\n  addSearchClearButton();\n});\n\nexport async function initCatalog() {\n  console.log('initCatalog fonksiyonu çağrıldı!');\n  if (!form || !movieList || !noResults) {\n    console.error('Catalog için gerekli DOM elemanları bulunamadı!');\n    return;\n  }\n\n  // yearSelect ile ilgili kodları kaldırdık\n\n  try {\n    // Sadece popüler filmlerden 60 film çek\n    let allFetchedMovies = [];\n    for (let i = 1; i <= totalApiPages; i++) {\n      const data = await fetchPopularMovies(i);\n      allFetchedMovies = allFetchedMovies.concat(data.results);\n    }\n    allMovies = allFetchedMovies.slice(0, TOTAL_MOVIES);\n    totalPages = Math.ceil(allMovies.length / MOVIES_PER_PAGE);\n    currentPage = 1;\n    // --- TEST: Genre map geliyor mu? ---\n    const testGenreMap = await ensureGenreMap();\n    console.log('Genre map:', testGenreMap);\n    // --- TEST SONU ---\n    renderMovies(getMoviesForPage(currentPage));\n    renderPagination(currentPage, totalPages);\n    // Pagination'ı movieList'in hemen altına ekle\n    if (!paginationContainer.parentNode) {\n      movieList.parentNode.insertBefore(paginationContainer, movieList.nextSibling);\n    }\n\n    // Arama formu submit\n    form.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      const query = document.getElementById('search-input').value.trim();\n      const year = selectedYear;\n\n      if (!query) return;\n\n      try {\n        const data = await searchMovies(query);\n        let filteredResults = data.results;\n\n        if (year) {\n          filteredResults = filteredResults.filter(\n            m => m.release_date && m.release_date.startsWith(year)\n          );\n        }\n\n        renderMovies(filteredResults);\n        yearDropdown.style.display = 'inline-block'; // Sadece arama sonrası göster\n        form.classList.add('active'); // Sadece arama sonrası üçlü blok ortala\n\n        if (filteredResults.length === 0) {\n          noResults.style.display = 'block';\n        } else {\n          noResults.style.display = 'none';\n        }\n      } catch (error) {\n        console.error('Arama sırasında hata oluştu:', error);\n        noResults.style.display = 'block';\n        noResults.textContent = 'Film bulunamadı veya bir hata oluştu.';\n        yearDropdown.style.display = 'inline-block'; // Hata olsa bile göster\n        form.classList.add('active'); // Hata olsa bile üçlü blok ortala\n      }\n    });\n  } catch (error) {\n    console.error('Filmler yüklenirken hata:', error);\n    noResults.style.display = 'block';\n    noResults.textContent = 'Filmler yüklenirken hata oluştu.';\n  }\n}\n\n"],"names":["initHeader","menuBtn","mainNav","overlay","navLinks","currentPage","link","l","htmlEl","themeIcon","savedTheme","updateIcon","newTheme","theme","iconPath","API_KEY","BASE_URL","fetchPopularMovies","page","fetchDailyTrending","fetchWeeklyTrending","fetchUpcomingMovies","fetchMovieDetails","movieId","fetchMovieVideos","searchMovies","query","year","fetchGenres","teamBtn","teamModal","modalClose","currentSlide","showSlide","index","slide","i","slides","closeSvg","genreMap","ensureGenreMap","data","g","getLibrary","saveLibrary","library","toggleLibrary","movie","button","id","updateButtonState","createMoviePopup","template","isLocal","popupPath","res","html","tempDiv","popupOverlay","showPopupFromTemplate","error","isClosed","closePopup","img","formattedVote","formattedPopularity","genreText","map","addBtn","closeBtn","closeImg","e","oldPopup","form","movieList","noResults","MOVIES_PER_PAGE","TOTAL_MOVIES","TMDB_PAGE_SIZE","totalApiPages","allMovies","totalPages","paginationContainer","enableMoviePopups","li","idx","renderPagination","addArrowBtn","direction","disabled","btn","arrowSvg","addPageBtn","num","isActive","changePage","newPage","renderMovies","getMoviesForPage","start","getStarIcons","vote","fullStars","halfStar","emptyStars","createMovieCard","imgSrc","releaseYear","rating","genreNames","stars","movies","selectedYear","yearDropdown","yearSelected","yearOptions","yearLabel","currentYear","y","addSearchClearButton","searchInput","wrapper","clearBtn","initCatalog","allFetchedMovies","testGenreMap","filteredResults","m"],"mappings":"ssBAAO,SAASA,GAAa,CAC3B,MAAMC,EAAU,SAAS,eAAe,eAAe,EACjDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAU,SAAS,eAAe,aAAa,EAErDF,EAAQ,iBAAiB,QAAS,IAAM,CACtCC,EAAQ,UAAU,OAAO,MAAM,EAC/BC,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAAG,EAEDA,EAAQ,iBAAiB,QAAS,IAAM,CACtCD,EAAQ,UAAU,OAAO,MAAM,EAC/BC,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAAG,EAGD,MAAMC,EAAW,SAAS,iBAAiB,WAAW,EAChDC,EAAc,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,IAAG,EAE3DD,EAAS,QAAQE,GAAQ,CACnBA,EAAK,aAAa,MAAM,IAAMD,EAChCC,EAAK,UAAU,IAAI,QAAQ,EAE3BA,EAAK,UAAU,OAAO,QAAQ,EAIhCA,EAAK,iBAAiB,QAAS,IAAM,CACnCF,EAAS,QAAQG,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAClDD,EAAK,UAAU,IAAI,QAAQ,CACjC,CAAK,CACL,CAAG,EAGD,MAAME,EAAS,SAAS,gBAClBC,EAAY,SAAS,cAAc,aAAa,EAEhDC,EAAa,aAAa,QAAQ,OAAO,EAC3CA,GACFF,EAAO,aAAa,aAAcE,CAAU,EAC5CC,EAAWD,CAAU,IAErBF,EAAO,aAAa,aAAc,MAAM,EACxCG,EAAW,MAAM,GAGI,SAAS,eAAe,gBAAgB,EAEhD,iBAAiB,QAAS,IAAM,CAE7C,MAAMC,EADeJ,EAAO,aAAa,YAAY,IACnB,OAAS,QAAU,OACrDA,EAAO,aAAa,aAAcI,CAAQ,EAC1C,aAAa,QAAQ,QAASA,CAAQ,EACtCD,EAAWC,CAAQ,EACnB,QAAQ,IAAI,gBAAiBA,CAAQ,CACzC,CAAG,EAED,SAASD,EAAWE,EAAO,CACzB,MAAMC,EACJD,IAAU,OAAS,qBAAuB,sBAC5CJ,EAAU,aAAa,MAAOK,CAAQ,CAC1C,CACA,CAEAd,EAAU,EChEV,MAAMe,EAAU,mCACVC,EAAW,+BAGV,eAAeC,EAAmBC,EAAO,EAAG,CAEjD,OAAO,MADK,MAAM,MAAM,GAAGF,CAAQ,0BAA0BD,CAAO,SAASG,CAAI,EAAE,GAClE,KAAI,CACvB,CAGO,eAAeC,IAAqB,CAEzC,OAAO,MADK,MAAM,MAAM,GAAGH,CAAQ,+BAA+BD,CAAO,EAAE,GAC1D,KAAI,CACvB,CAGO,eAAeK,IAAsB,CAE1C,OAAO,MADK,MAAM,MAAM,GAAGJ,CAAQ,gCAAgCD,CAAO,EAAE,GAC3D,KAAI,CACvB,CAGO,eAAeM,IAAsB,CAE1C,OAAO,MADK,MAAM,MAAM,GAAGL,CAAQ,2BAA2BD,CAAO,EAAE,GACtD,KAAI,CACvB,CAGO,eAAeO,GAAkBC,EAAS,CAE/C,OAAO,MADK,MAAM,MAAM,GAAGP,CAAQ,UAAUO,CAAO,YAAYR,CAAO,EAAE,GACxD,KAAI,CACvB,CAGO,eAAeS,GAAiBD,EAAS,CAE9C,OAAO,MADK,MAAM,MAAM,GAAGP,CAAQ,UAAUO,CAAO,mBAAmBR,CAAO,EAAE,GAC/D,KAAI,CACvB,CAGO,eAAeU,EAAaC,EAAOC,EAAO,GAAI,CAInD,OAAO,MAHK,MAAM,MAChB,GAAGX,CAAQ,yBAAyBD,CAAO,UAAU,mBAAmBW,CAAK,CAAC,SAASC,CAAI,EAC/F,GACmB,KAAI,CACvB,CAGO,eAAeC,GAAc,CAElC,OAAO,MADK,MAAM,MAAM,GAAGZ,CAAQ,6BAA6BD,CAAO,EAAE,GACxD,KAAI,CACvB,CCnDA,MAAMc,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAa,SAAS,eAAe,aAAa,EAExD,IAAIC,EAAe,EAEnB,SAASC,EAAUC,EAAO,CACT,SAAS,iBAAiB,QAAQ,EAC1C,QAAQ,CAACC,EAAOC,IAAM,CAC3BD,EAAM,UAAU,OAAO,QAAQ,EAC3BC,IAAMF,GACRC,EAAM,UAAU,IAAI,QAAQ,CAElC,CAAG,CACH,CAEAN,EAAQ,iBAAiB,QAAS,IAAM,CACtCG,EAAe,EACfC,EAAUD,CAAY,EACtBF,EAAU,MAAM,QAAU,MAC5B,CAAC,EAEDC,EAAW,iBAAiB,QAAS,IAAM,CACzCD,EAAU,MAAM,QAAU,MAC5B,CAAC,EAED,OAAO,iBAAiB,UAAW,GAAK,CAClC,EAAE,MAAQ,WACZA,EAAU,MAAM,QAAU,OAE9B,CAAC,EAEDA,EAAU,iBAAiB,QAAS,GAAK,CACnC,EAAE,SAAWA,IACfA,EAAU,MAAM,QAAU,OAE9B,CAAC,EAED,SAAS,cAAc,aAAa,EAAE,iBAAiB,QAAS,IAAM,CACpE,MAAMO,EAAS,SAAS,iBAAiB,QAAQ,EACjDL,GAAgBA,EAAe,EAAIK,EAAO,QAAUA,EAAO,OAC3DJ,EAAUD,CAAY,CACxB,CAAC,EAED,SAAS,cAAc,aAAa,EAAE,iBAAiB,QAAS,IAAM,CACpE,MAAMK,EAAS,SAAS,iBAAiB,QAAQ,EACjDL,GAAgBA,EAAe,GAAKK,EAAO,OAC3CJ,EAAUD,CAAY,CACxB,CAAC,EChDD,MAAAM,EAAe,4SCaf,IAAIC,EAAW,KAEf,eAAeC,GAAiB,CAC9B,GAAID,EAAU,OAAOA,EACrB,MAAME,EAAO,MAAMb,EAAW,EAC9B,OAAAW,EAAW,CAAA,EACPE,EAAK,QAAU,MAAM,QAAQA,EAAK,MAAM,GAC1CA,EAAK,OAAO,QAAQC,GAAK,CACvBH,EAASG,EAAE,EAAE,EAAIA,EAAE,IACzB,CAAK,EAEIH,CACT,CAEA,SAASI,GAAa,CACpB,MAAMF,EAAO,aAAa,QAAQ,SAAS,EAC3C,OAAOA,EAAO,KAAK,MAAMA,CAAI,EAAI,CAAA,CACnC,CAEA,SAASG,EAAYC,EAAS,CAC5B,aAAa,QAAQ,UAAW,KAAK,UAAUA,CAAO,CAAC,CACzD,CAEA,SAASC,EAAcC,EAAOC,EAAQ,CACpC,IAAIH,EAAUF,EAAU,EACxB,MAAMpB,EAAUwB,EAAM,GAElBF,EAAQ,SAAStB,CAAO,GAC1BsB,EAAUA,EAAQ,OAAOI,GAAMA,IAAO1B,CAAO,EAC7CyB,EAAO,YAAc,iBACrBA,EAAO,UAAU,OAAO,SAAS,IAEjCH,EAAQ,KAAKtB,CAAO,EACpByB,EAAO,YAAc,yBACrBA,EAAO,UAAU,IAAI,SAAS,GAGhCJ,EAAYC,CAAO,CACrB,CAEA,SAASK,EAAkBH,EAAOC,EAAQ,CACxBL,EAAU,EACd,SAASI,EAAM,EAAE,GAC3BC,EAAO,YAAc,yBACrBA,EAAO,UAAU,IAAI,SAAS,IAE9BA,EAAO,YAAc,iBACrBA,EAAO,UAAU,OAAO,SAAS,EAErC,CAqBO,eAAeG,EAAiBJ,EAAO,CAE5C,IAAIK,EAAW,SAAS,cAAc,iBAAiB,EACvD,GAAI,CAACA,EAAU,CAEb,MAAMC,EAAU,OAAO,SAAS,WAAa,YAC7C,IAAIC,EAEAD,EAEFC,EAAY,cAIZA,EAAY,IADK,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,CAC9B,cAG1B,MAAMA,CAAS,EACZ,KAAKC,GAAO,CACX,GAAI,CAACA,EAAI,GACP,cAAQ,MAAM,kCAAkCA,EAAI,MAAM,UAAUA,EAAI,GAAG,EAAE,EACvE,IAAI,MAAM,8BAA8B,EAEhD,OAAOA,EAAI,KAAI,CACvB,CAAO,EACA,KAAK,MAAMC,GAAQ,CAClB,MAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAYD,EACpB,MAAME,EAAeD,EAAQ,cAAc,sBAAsB,EAC7DC,GACFA,EAAa,GAAK,iBAClB,SAAS,KAAK,YAAYA,CAAY,EACtC,MAAMC,EAAsBD,EAAcX,CAAK,GAE/C,QAAQ,MAAM,+DAA+D,CAEvF,CAAO,EACA,MAAMa,GAAS,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CACjE,CAAO,EACH,MACJ,CAGE,MAAMF,EAAeN,EAAS,UAAU,EAAI,EAC5CM,EAAa,GAAK,GAClB,MAAMC,EAAsBD,EAAcX,CAAK,CACjD,CAIA,eAAeY,EAAsBD,EAAcX,EAAO,CACxDW,EAAa,MAAM,QAAU,OAC7B,SAAS,KAAK,MAAM,SAAW,SAG/B,IAAIG,EAAW,GACf,SAASC,GAAa,CAChBD,IACJA,EAAW,GAEPH,EAAa,YAAYA,EAAa,WAAW,YAAYA,CAAY,EAE7E,SAAS,KAAK,MAAM,SAAW,GACnC,CAGE,MAAMK,EAAML,EAAa,cAAc,kBAAkB,EACzDK,EAAI,IAAMhB,EAAM,YAAc,sCAAsCA,EAAM,WAAW,GAAK,GAC1FgB,EAAI,IAAMhB,EAAM,MAEhBW,EAAa,cAAc,oBAAoB,EAAE,YAAcX,EAAM,MAErE,MAAMiB,EAAgBjB,EAAM,cAAgB,KAAOA,EAAM,aAAa,QAAQ,CAAC,EAAI,IACnFW,EAAa,cAAc,WAAW,EAAE,YAAcM,EACtDN,EAAa,cAAc,aAAa,EAAE,YAAcX,EAAM,YAAc,IAE5E,MAAMkB,EAAsBlB,EAAM,YAAc,KAAOA,EAAM,WAAW,QAAQ,CAAC,EAAI,IACrFW,EAAa,cAAc,mBAAmB,EAAE,YAAcO,EAE9D,IAAIC,EAAY,IAChB,GAAInB,EAAM,aAAe,MAAM,QAAQA,EAAM,WAAW,EACtDmB,EAAYnB,EAAM,YAAY,KAAK,IAAI,UAC9BA,EAAM,WAAa,MAAM,QAAQA,EAAM,SAAS,EAAG,CAC5D,MAAMoB,EAAM,MAAM3B,EAAc,EAChC0B,EAAYnB,EAAM,UAAU,IAAIE,GAAMkB,EAAIlB,CAAE,GAAKA,CAAE,EAAE,KAAK,IAAI,CAClE,CACES,EAAa,cAAc,cAAc,EAAE,YAAcQ,EAEzDR,EAAa,cAAc,cAAc,EAAE,YAAcX,EAAM,UAAY,kBAG3E,MAAMqB,EAASV,EAAa,cAAc,sBAAsB,EAC5DU,IACFlB,EAAkBH,EAAOqB,CAAM,EAC/BA,EAAO,iBAAiB,QAAS,UAAW,CAC1CtB,EAAcC,EAAO,IAAI,CAC/B,CAAK,GAIH,MAAMsB,EAAWX,EAAa,cAAc,oBAAoB,EAChEW,EAAS,UAAY,GAErB,IAAIC,EAAWD,EAAS,cAAc,KAAK,EACtCC,IACHA,EAAW,SAAS,cAAc,KAAK,EACvCA,EAAS,IAAM,QACfA,EAAS,UAAY,aACrBA,EAAS,MAAQ,GACjBA,EAAS,OAAS,GAClBA,EAAS,MAAM,MAAQ,OACvBA,EAAS,MAAM,OAAS,OACxBA,EAAS,IAAMhC,EACf+B,EAAS,YAAYC,CAAQ,GAI/BD,EAAS,QAAU,KACnBA,EAAS,iBAAiB,QAAS,SAASE,EAAG,CAC7CA,EAAE,eAAc,EAChBA,EAAE,gBAAe,EACjBT,EAAU,CACd,CAAG,EAGDJ,EAAa,QAAU,KACvBA,EAAa,iBAAiB,QAAS,SAASa,EAAG,CAC7CA,EAAE,SAAWb,GACfI,EAAU,CAEhB,CAAG,EAGD,MAAMU,EAAW,SAAS,cAAc,sBAAsB,EAC1DA,GAAUA,EAAS,OAAM,EAC7B,SAAS,KAAK,YAAYd,CAAY,CACxC,CClNA,QAAQ,IAAI,sBAAsB,EAElC,MAAMe,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAY,SAAS,eAAe,YAAY,EAIhDC,EAAkB,GAClBC,EAAe,GACfC,EAAiB,GACjBC,EAAgB,KAAK,KAAKF,EAAeC,CAAc,EAC7D,IAAIE,EAAY,CAAA,EACZ3E,EAAc,EACd4E,EAAa,KAAK,KAAKJ,EAAeD,CAAe,EAGrDM,EAAsB,SAAS,cAAc,KAAK,EACtDA,EAAoB,UAAY,uBAEhC,SAASC,GAAoB,CAC3BT,EAAU,iBAAiB,QAAS,GAAK,CACvC,MAAMU,EAAK,EAAE,OAAO,QAAQ,eAAe,EAC3C,GAAI,CAACA,EAAI,OACT,MAAMC,EAAM,MAAM,KAAKX,EAAU,QAAQ,EAAE,QAAQU,CAAE,EAI/CrC,EAHS,MAAM,KAAK2B,EAAU,QAAQ,EACzC,IAAIU,GAAMA,EAAG,UAAU,EACvB,OAAO,OAAO,EACIC,CAAG,EACpBtC,GAAOI,EAAiBJ,CAAK,CACrC,CAAG,CACH,CAEA,SAASuC,EAAiBpE,EAAM+D,EAAY,CAC1CC,EAAoB,UAAY,GAEhC,SAASK,EAAYC,EAAWC,EAAU,CACxC,MAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,UAAY,mBAChBA,EAAI,SAAWD,EACf,IAAIE,EAAW,GACf,OAAIH,IAAc,OAChBG,EAAW,uNAEXA,EAAW,uNAEbD,EAAI,UAAYC,EAChBT,EAAoB,YAAYQ,CAAG,EAC5BA,CACX,CACE,SAASE,EAAWC,EAAKC,EAAU,CACjC,MAAMJ,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,UAAY,mBAAqBI,EAAW,UAAY,IAC5DJ,EAAI,YAAcG,EAClBH,EAAI,iBAAiB,QAAS,IAAMK,EAAWF,CAAG,CAAC,EACnDX,EAAoB,YAAYQ,CAAG,CACvC,CAEkBH,EAAY,OAAQrE,IAAS,CAAC,EACtC,iBAAiB,QAAS,IAAM6E,EAAW7E,EAAO,CAAC,CAAC,EAC5D,QAASkB,EAAI,EAAGA,GAAK6C,EAAY7C,IAC/BwD,EAAWxD,EAAGlB,IAASkB,CAAC,EAEVmD,EAAY,OAAQrE,IAAS+D,CAAU,EAC/C,iBAAiB,QAAS,IAAMc,EAAW7E,EAAO,CAAC,CAAC,CAC9D,CAEA,SAAS6E,EAAWC,EAAS,CACvBA,EAAU,GAAKA,EAAUf,IAC7B5E,EAAc2F,EACdC,EAAaC,EAAiB7F,CAAW,CAAC,EAC1CiF,EAAiBjF,EAAa4E,CAAU,EAC1C,CAEA,SAASiB,EAAiBhF,EAAM,CAC9B,MAAMiF,GAASjF,EAAO,GAAK0D,EAC3B,OAAOI,EAAU,MAAMmB,EAAOA,EAAQvB,CAAe,CACvD,CAGA,SAASwB,EAAaC,EAAM,CAC1B,MAAMC,EAAY,KAAK,MAAMD,EAAO,CAAC,EAC/BE,EAAWF,EAAO,GAAK,EAAI,EAAI,EAC/BG,EAAa,EAAIF,EAAYC,EASnC,MANgB,yQAON,OAAOD,CAAS,EALN,gcAMN,OAAOC,CAAQ,EAJR,sQAKN,OAAOC,CAAU,CAElC,CAGA,SAASC,GAAgB1D,EAAOR,EAAU,CACxC,MAAM6C,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAU,IAAI,aAAc,oBAAoB,EAEnD,MAAMsB,EAAS3D,EAAM,YACjB,kCAAkCA,EAAM,WAAW,GACnD,oDAEE4D,EAAc5D,EAAM,cAAc,MAAM,GAAG,EAAE,CAAC,GAAK,aACnD6D,EAAS7D,EAAM,cAAgB,EAErC,IAAI8D,EAAa,iBACb9D,EAAM,WAAaR,EACrBsE,EAAa9D,EAAM,UAAU,IAAIE,GAAMV,EAASU,CAAE,GAAKA,CAAE,EAAE,KAAK,IAAI,EAC3DF,EAAM,QAAU,MAAM,QAAQA,EAAM,MAAM,IACnD8D,EAAa9D,EAAM,OAAO,IAAIL,GAAKA,EAAE,IAAI,EAAE,KAAK,IAAI,GAEtD,MAAMoE,EAAQV,EAAaQ,CAAM,EAEjC,OAAAxB,EAAG,UAAY;AAAA,gBACDsB,CAAM,UAAU3D,EAAM,KAAK;AAAA;AAAA,uCAEJA,EAAM,KAAK;AAAA;AAAA,6CAEL8D,CAAU,MAAMF,CAAW;AAAA,2CAC7BG,CAAK;AAAA;AAAA;AAAA,IAM9C1B,EAAG,iBAAiB,QAAS,IAAM,CAC7B,OAAOjC,GAAqB,YAC9BA,EAAiBJ,CAAK,CAE5B,CAAG,EAEMqC,CACT,CAGA,SAASa,EAAac,EAAQ,CAE5B,GADArC,EAAU,UAAY,GAClB,CAACqC,GAAUA,EAAO,SAAW,EAAG,CAClCpC,EAAU,MAAM,QAAU,QAC1B,MACJ,CACEA,EAAU,MAAM,QAAU,OAErB,OAAO,YAAW,OAAO,UAAY,MAC1C,MAAMpC,EAAW,OAAO,UACxBwE,EAAO,QAAQhE,GAAS,CACtB,MAAMqC,EAAKqB,GAAgB1D,EAAOR,CAAQ,EAC1C6C,EAAG,WAAarC,EAChB2B,EAAU,YAAYU,CAAE,CAC5B,CAAG,CACH,CAGA,eAAe5C,IAAiB,CAC9B,GAAI,OAAO,UAAW,OAAO,OAAO,UACpC,GAAI,OAAOZ,GAAgB,WAAY,CACrC,MAAMa,EAAO,MAAMb,EAAW,EAC9B,QAAQ,IAAI,sBAAuBa,CAAI,EACvC,MAAM0B,EAAM,CAAA,EACZ,OAAI1B,EAAK,QAAU,MAAM,QAAQA,EAAK,MAAM,GAC1CA,EAAK,OAAO,QAAQC,GAAK,CACvByB,EAAIzB,EAAE,EAAE,EAAIA,EAAE,IACtB,CAAO,EAEH,OAAO,UAAYyB,EACZA,CACX,CACE,OAAO,IACT,CAGA,IAAI6C,EAAe,GACnB,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EAC5DA,EAAa,MAAM,QAAU,OAC7B,MAAMC,GAAeD,EAAa,cAAc,gBAAgB,EAC1DE,EAAcF,EAAa,cAAc,eAAe,EACxDG,GAAYH,EAAa,cAAc,aAAa,EAEpDI,GAAc,IAAI,KAAI,EAAG,YAAW,EAC1C,QAASC,EAAID,GAAaC,GAAK,KAAMA,IAAK,CACxC,MAAMlC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAckC,EACjBlC,EAAG,iBAAiB,QAAS,IAAM,CACjC4B,EAAeM,EACfF,GAAU,YAAcE,EACxBH,EAAY,UAAU,IAAI,QAAQ,CACtC,CAAG,EACDA,EAAY,YAAY/B,CAAE,CAC5B,CAEA8B,GAAa,iBAAiB,QAAU,GAAM,CAC5C,EAAE,gBAAe,EACjBC,EAAY,UAAU,OAAO,QAAQ,CACvC,CAAC,EAED,SAAS,iBAAiB,QAAU,GAAM,CACnCF,EAAa,SAAS,EAAE,MAAM,GACjCE,EAAY,UAAU,IAAI,QAAQ,CAEtC,CAAC,EAGD,SAASI,IAAuB,CAC9B,MAAMC,EAAc,SAAS,eAAe,cAAc,EAC1D,GAAI,CAACA,EAAa,OAElB,GAAI,CAACA,EAAY,WAAW,UAAU,SAAS,sBAAsB,EAAG,CACtE,MAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,uBACpBD,EAAY,WAAW,aAAaC,EAASD,CAAW,EACxDC,EAAQ,YAAYD,CAAW,CACnC,CACE,MAAMC,EAAUD,EAAY,WAE5B,GAAIC,EAAQ,cAAc,mBAAmB,EAAG,OAChD,MAAMC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,KAAO,SAChBA,EAAS,UAAY,mBACrBA,EAAS,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,IAMrBA,EAAS,MAAM,QAAU,OACzBA,EAAS,iBAAiB,QAAS,IAAM,CACvCF,EAAY,MAAQ,GACpBA,EAAY,MAAK,EACjBE,EAAS,MAAM,QAAU,MAC7B,CAAG,EACDD,EAAQ,YAAYC,CAAQ,EAE5BF,EAAY,iBAAiB,QAAS,IAAM,CAC1CE,EAAS,MAAM,QAAUF,EAAY,MAAQ,OAAS,MAC1D,CAAG,EAEDE,EAAS,MAAM,QAAUF,EAAY,MAAQ,OAAS,MACxD,CAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDG,GAAW,EACXxC,EAAiB,EACjBoC,GAAoB,CACtB,CAAC,EAEM,eAAeI,IAAc,CAElC,GADA,QAAQ,IAAI,kCAAkC,EAC1C,CAAClD,GAAQ,CAACC,GAAa,CAACC,EAAW,CACrC,QAAQ,MAAM,iDAAiD,EAC/D,MACJ,CAIE,GAAI,CAEF,IAAIiD,EAAmB,CAAA,EACvB,QAASxF,EAAI,EAAGA,GAAK2C,EAAe3C,IAAK,CACvC,MAAMK,EAAO,MAAMxB,EAAmBmB,CAAC,EACvCwF,EAAmBA,EAAiB,OAAOnF,EAAK,OAAO,CAC7D,CACIuC,EAAY4C,EAAiB,MAAM,EAAG/C,CAAY,EAClDI,EAAa,KAAK,KAAKD,EAAU,OAASJ,CAAe,EACzDvE,EAAc,EAEd,MAAMwH,EAAe,MAAMrF,GAAc,EACzC,QAAQ,IAAI,aAAcqF,CAAY,EAEtC5B,EAAaC,EAAiB7F,CAAW,CAAC,EAC1CiF,EAAiBjF,EAAa4E,CAAU,EAEnCC,EAAoB,YACvBR,EAAU,WAAW,aAAaQ,EAAqBR,EAAU,WAAW,EAI9ED,EAAK,iBAAiB,SAAU,MAAMF,GAAK,CACzCA,EAAE,eAAc,EAEhB,MAAM7C,EAAQ,SAAS,eAAe,cAAc,EAAE,MAAM,KAAI,EAC1DC,EAAOqF,EAEb,GAAKtF,EAEL,GAAI,CAEF,IAAIoG,GADS,MAAMrG,EAAaC,CAAK,GACV,QAEvBC,IACFmG,EAAkBA,EAAgB,OAChCC,GAAKA,EAAE,cAAgBA,EAAE,aAAa,WAAWpG,CAAI,CACjE,GAGQsE,EAAa6B,CAAe,EAC5Bb,EAAa,MAAM,QAAU,eAC7BxC,EAAK,UAAU,IAAI,QAAQ,EAEvBqD,EAAgB,SAAW,EAC7BnD,EAAU,MAAM,QAAU,QAE1BA,EAAU,MAAM,QAAU,MAEpC,OAAef,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnDe,EAAU,MAAM,QAAU,QAC1BA,EAAU,YAAc,wCACxBsC,EAAa,MAAM,QAAU,eAC7BxC,EAAK,UAAU,IAAI,QAAQ,CACnC,CACA,CAAK,CACL,OAAWb,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDe,EAAU,MAAM,QAAU,QAC1BA,EAAU,YAAc,kCAC5B,CACA"}