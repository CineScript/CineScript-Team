(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const d="2609725f661288e9b08bc0d62455b671",m="https://api.themoviedb.org/3";async function _(e=1){return await(await fetch(`${m}/movie/popular?api_key=${d}&page=${e}`)).json()}async function E(){return await(await fetch(`${m}/trending/movie/day?api_key=${d}`)).json()}async function C(){return await(await fetch(`${m}/trending/movie/week?api_key=${d}`)).json()}async function x(){return await(await fetch(`${m}/movie/upcoming?api_key=${d}`)).json()}async function R(e){return await(await fetch(`${m}/movie/${e}?api_key=${d}`)).json()}async function q(e,t=""){return await(await fetch(`${m}/search/movie?api_key=${d}&query=${encodeURIComponent(e)}&year=${t}`)).json()}async function M(){return await(await fetch(`${m}/genre/movie/list?api_key=${d}`)).json()}let h=null;async function A(){if(h)return h;const e=await M();return h={},e.genres&&Array.isArray(e.genres)&&e.genres.forEach(t=>{h[t.id]=t.name}),h}function S(){const e=localStorage.getItem("library");return e?JSON.parse(e):[]}function B(e){localStorage.setItem("library",JSON.stringify(e))}function P(e,t){let n=S();const a=e.id;n.includes(a)?(n=n.filter(r=>r!==a),t.textContent="Add to library",t.classList.remove("removed")):(n.push(a),t.textContent="Remove from my library",t.classList.add("removed")),B(n)}function T(e,t){S().includes(e.id)?(t.textContent="Remove from my library",t.classList.add("removed")):(t.textContent="Add to library",t.classList.remove("removed"))}async function D(e){let t=document.querySelector("#popup-template");if(!t){const a=window.location.hostname==="localhost";let r;a?r="/popup.html":r=`/${window.location.pathname.split("/")[1]}/popup.html`,fetch(r).then(o=>{if(!o.ok)throw console.error(`Popup.html yüklenemedi. Durum: ${o.status}, URL: ${o.url}`),new Error("Network response was not ok.");return o.text()}).then(async o=>{const i=document.createElement("div");i.innerHTML=o;const s=i.querySelector(".movie-popup-overlay");s?(s.id="popup-template",document.body.appendChild(s),await L(s,e)):console.error("movie-popup-overlay bulunamadı, HTML içeriği yanlış olabilir.")}).catch(o=>{console.error("Popup yüklenirken bir hata oluştu:",o)});return}const n=t.cloneNode(!0);n.id="",await L(n,e)}async function L(e,t){e.style.display="flex";const n=e.querySelector(".movie-popup-img");n.src=t.poster_path?`https://image.tmdb.org/t/p/original${t.poster_path}`:"",n.alt=t.title,e.querySelector(".movie-popup-title").textContent=t.title;const a=t.vote_average!=null?t.vote_average.toFixed(1):"-";e.querySelector(".vote-avg").textContent=a,e.querySelector(".vote-count").textContent=t.vote_count??"-";const r=t.popularity!=null?t.popularity.toFixed(1):"-";e.querySelector(".popularity-value").textContent=r;let o="-";if(t.genre_names&&Array.isArray(t.genre_names))o=t.genre_names.join(", ");else if(t.genre_ids&&Array.isArray(t.genre_ids)){const c=await A();o=t.genre_ids.map(b=>c[b]||b).join(", ")}e.querySelector(".genre-value").textContent=o,e.querySelector(".about-value").textContent=t.overview||"No description.";const i=e.querySelector(".movie-popup-add-btn");i&&(T(t,i),i.addEventListener("click",function(){P(t,this)}));const s=e.querySelector(".movie-popup-close"),f=window.location.hostname==="localhost",g=f?"":window.location.pathname.split("/")[1],u=f?"":`/${g}`;s.addEventListener("mouseenter",()=>{s.querySelector("img").src=`${u}/img/svg/close-hover.svg`}),s.addEventListener("mouseleave",()=>{s.querySelector("img").src=`${u}/img/svg/close.svg`}),s.addEventListener("click",()=>e.remove()),e.addEventListener("mousedown",function(c){c.target===e&&e.remove()}),document.body.appendChild(e)}console.log("catalog.js yüklendi!");const v=document.getElementById("search-form"),p=document.getElementById("movie-list"),l=document.getElementById("no-results"),y=document.getElementById("year-select");function I(){p.addEventListener("click",e=>{const t=e.target.closest("li.movie-item");if(!t)return;const n=Array.from(p.children).indexOf(t),r=Array.from(p.children).map(o=>o._movieData).filter(Boolean)[n];r&&D(r)})}function k(e){if(p.innerHTML="",!e||e.length===0){l.style.display="block";return}l.style.display="none",e.slice(0,21).forEach(n=>{const a=document.createElement("li");a.classList.add("movie-item"),a.innerHTML=`
      <img src="https://image.tmdb.org/t/p/original${n.poster_path}" alt="${n.title}" />
      <h3>${n.title}</h3>
      <p>Yayın Tarihi: ${n.release_date||"Bilinmiyor"}</p>
    `,a._movieData=n,p.appendChild(a)})}function N(){const e=new Date().getFullYear();for(let t=e;t>=1900;t--){const n=document.createElement("option");n.value=t,n.textContent=t,y.appendChild(n)}}async function j(){if(console.log("initCatalog fonksiyonu çağrıldı!"),!v||!p||!l||!y){console.error("Catalog için gerekli DOM elemanları bulunamadı!");return}N();try{const[e,t,n,a]=await Promise.all([_(),E(),C(),x()]),r=[...e.results,...t.results,...n.results,...a.results],o=new Map;r.forEach(i=>{o.has(i.id)||o.set(i.id,i)}),k(Array.from(o.values())),v.addEventListener("submit",async i=>{i.preventDefault();const s=document.getElementById("search-input").value.trim(),f=y.value;if(s)try{let u=(await q(s)).results;if(f&&(u=u.filter(c=>c.release_date&&c.release_date.startsWith(f))),k(u),u.length===0)l.style.display="block",l.textContent="Aradığınız kriterlere uygun film bulunamadı.";else{l.style.display="none",y.style.display="inline-block";const c=v.querySelector(".search-button");c&&y&&v.insertBefore(y,c)}}catch(g){console.error("Arama sırasında hata oluştu:",g),l.style.display="block",l.textContent="Film bulunamadı veya bir hata oluştu."}})}catch(e){console.error("Filmler yüklenirken hata:",e),l.style.display="block",l.textContent="Filmler yüklenirken hata oluştu."}}document.addEventListener("DOMContentLoaded",()=>{j(),I()});const w=document.querySelector("#scrollUpBtn"),$=300;window.onscroll=function(){F()};function F(){document.body.scrollTop>$||document.documentElement.scrollTop>$?w.style.display="block":(w.style.display="none",console.log("Scroll up button çalışmadı"))}w.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});export{R as a,M as b,E as f,j as i};
//# sourceMappingURL=scroll-up-DXK32Vq1.js.map
