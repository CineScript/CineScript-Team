(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function q(){const e=document.getElementById("menuToggleBtn"),t=document.getElementById("mainNav"),n=document.getElementById("menuOverlay");e.addEventListener("click",()=>{t.classList.toggle("open"),n.classList.toggle("active")}),n.addEventListener("click",()=>{t.classList.remove("open"),n.classList.remove("active")});const i=document.querySelectorAll(".nav-link"),r=window.location.pathname.split("/").pop();i.forEach(l=>{l.getAttribute("href")===r?l.classList.add("active"):l.classList.remove("active"),l.addEventListener("click",()=>{i.forEach(s=>s.classList.remove("active")),l.classList.add("active")})});const o=document.documentElement,c=document.querySelector(".theme-icon"),a=localStorage.getItem("theme");a?(o.setAttribute("data-theme",a),h(a)):(o.setAttribute("data-theme","dark"),h("dark")),document.getElementById("themeToggleBtn").addEventListener("click",()=>{const s=o.getAttribute("data-theme")==="dark"?"light":"dark";o.setAttribute("data-theme",s),localStorage.setItem("theme",s),h(s),console.log("Tema değişti:",s)});function h(l){const s=l==="dark"?"./img/svg/dark.svg":"./img/svg/light.svg";c.setAttribute("src",s)}}q();const y="2609725f661288e9b08bc0d62455b671",p="https://api.themoviedb.org/3";async function _(e=1){return await(await fetch(`${p}/movie/popular?api_key=${y}&page=${e}`)).json()}async function A(){return await(await fetch(`${p}/trending/movie/day?api_key=${y}`)).json()}async function M(){return await(await fetch(`${p}/trending/movie/week?api_key=${y}`)).json()}async function T(){return await(await fetch(`${p}/movie/upcoming?api_key=${y}`)).json()}async function W(e){return await(await fetch(`${p}/movie/${e}?api_key=${y}`)).json()}async function z(e){return await(await fetch(`${p}/movie/${e}/videos?api_key=${y}`)).json()}async function I(e,t=""){return await(await fetch(`${p}/search/movie?api_key=${y}&query=${encodeURIComponent(e)}&year=${t}`)).json()}async function P(){return await(await fetch(`${p}/genre/movie/list?api_key=${y}`)).json()}const D=document.getElementById("team-btn"),g=document.getElementById("team-modal"),N=document.getElementById("modal-close");let m=0;function b(e){document.querySelectorAll(".slide").forEach((n,i)=>{n.classList.remove("active"),i===e&&n.classList.add("active")})}D.addEventListener("click",()=>{m=0,b(m),g.style.display="flex"});N.addEventListener("click",()=>{g.style.display="none"});window.addEventListener("keydown",e=>{e.key==="Escape"&&(g.style.display="none")});g.addEventListener("click",e=>{e.target===g&&(g.style.display="none")});document.querySelector(".prev-slide").addEventListener("click",()=>{const e=document.querySelectorAll(".slide");m=(m-1+e.length)%e.length,b(m)});document.querySelector(".next-slide").addEventListener("click",()=>{const e=document.querySelectorAll(".slide");m=(m+1)%e.length,b(m)});const E=document.querySelector("#scrollUpBtn"),x=300;window.onscroll=function(){j()};function j(){document.body.scrollTop>x||document.documentElement.scrollTop>x?E.style.display="block":E.style.display="none"}E.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});const k="data:image/svg+xml,%3csvg%20class='popup-close-icon'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%3e%3cpath%20d='M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'/%3e%3cpath%20d='M6%2018L18%206'%20stroke='currentColor'%20stroke-width='2'/%3e%3c/svg%3e%3c/button%3e",F="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2011.25L0.75%200.75M11.25%200.75L0.75%2011.25'%20stroke='%23F87719'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";let w=null;async function H(){if(w)return w;const e=await P();return w={},e.genres&&Array.isArray(e.genres)&&e.genres.forEach(t=>{w[t.id]=t.name}),w}function $(){const e=localStorage.getItem("library");return e?JSON.parse(e):[]}function R(e){localStorage.setItem("library",JSON.stringify(e))}function U(e,t){let n=$();const i=e.id;n.includes(i)?(n=n.filter(r=>r!==i),t.textContent="Add to library",t.classList.remove("removed")):(n.push(i),t.textContent="Remove from my library",t.classList.add("removed")),R(n)}function Y(e,t){$().includes(e.id)?(t.textContent="Remove from my library",t.classList.add("removed")):(t.textContent="Add to library",t.classList.remove("removed"))}async function G(e){let t=document.querySelector("#popup-template");if(!t){const i=window.location.hostname==="localhost";let r;i?r="/popup.html":r=`/${window.location.pathname.split("/")[1]}/popup.html`,fetch(r).then(o=>{if(!o.ok)throw console.error(`Popup.html yüklenemedi. Durum: ${o.status}, URL: ${o.url}`),new Error("Network response was not ok.");return o.text()}).then(async o=>{const c=document.createElement("div");c.innerHTML=o;const a=c.querySelector(".movie-popup-overlay");a?(a.id="popup-template",document.body.appendChild(a),await B(a,e)):console.error("movie-popup-overlay bulunamadı, HTML içeriği yanlış olabilir.")}).catch(o=>{console.error("Popup yüklenirken bir hata oluştu:",o)});return}const n=t.cloneNode(!0);n.id="",await B(n,e)}async function B(e,t){e.style.display="flex";const n=e.querySelector(".movie-popup-img");n.src=t.poster_path?`https://image.tmdb.org/t/p/original${t.poster_path}`:"",n.alt=t.title,e.querySelector(".movie-popup-title").textContent=t.title;const i=t.vote_average!=null?t.vote_average.toFixed(1):"-";e.querySelector(".vote-avg").textContent=i,e.querySelector(".vote-count").textContent=t.vote_count??"-";const r=t.popularity!=null?t.popularity.toFixed(1):"-";e.querySelector(".popularity-value").textContent=r;let o="-";if(t.genre_names&&Array.isArray(t.genre_names))o=t.genre_names.join(", ");else if(t.genre_ids&&Array.isArray(t.genre_ids)){const s=await H();o=t.genre_ids.map(S=>s[S]||S).join(", ")}e.querySelector(".genre-value").textContent=o,e.querySelector(".about-value").textContent=t.overview||"No description.";const c=e.querySelector(".movie-popup-add-btn");c&&(Y(t,c),c.addEventListener("click",function(){U(t,this)}));const a=e.querySelector(".movie-popup-close");let d=a.querySelector("img");d||(d=document.createElement("img"),d.alt="close",d.className="close-icon",d.width=24,d.height=24,d.style.width="24px",d.style.height="24px",d.src=k,a.appendChild(d)),window.location.hostname==="localhost"||window.location.pathname.split("/")[1],a.addEventListener("mouseenter",()=>{a.querySelector("img").src=F}),a.addEventListener("mouseleave",()=>{a.querySelector("img").src=k}),a.addEventListener("click",()=>e.remove());function l(s){s.key==="Escape"&&(e.remove(),document.removeEventListener("keydown",l))}if(document.addEventListener("keydown",l),e.addEventListener("mousedown",function(s){s.target===e&&e.remove()}),document.body.appendChild(e),a){a.innerHTML="";const s=document.createElement("img");s.alt="close",s.className="close-icon",s.width=24,s.height=24,s.style.width="24px",s.style.height="24px",s.src=k,a.appendChild(s)}}console.log("catalog.js yüklendi!");const L=document.getElementById("search-form"),v=document.getElementById("movie-list"),u=document.getElementById("no-results"),f=document.getElementById("year-select");function J(){v.addEventListener("click",e=>{const t=e.target.closest("li.movie-item");if(!t)return;const n=Array.from(v.children).indexOf(t),r=Array.from(v.children).map(o=>o._movieData).filter(Boolean)[n];r&&G(r)})}function C(e){if(v.innerHTML="",!e||e.length===0){u.style.display="block";return}u.style.display="none",e.slice(0,21).forEach(n=>{const i=document.createElement("li");i.classList.add("movie-item"),i.innerHTML=`
      <img src="https://image.tmdb.org/t/p/original${n.poster_path}" alt="${n.title}" />
      <h3>${n.title}</h3>
      <p>Yayın Tarihi: ${n.release_date||"Bilinmiyor"}</p>
    `,i._movieData=n,v.appendChild(i)})}function K(){const e=new Date().getFullYear();for(let t=e;t>=1900;t--){const n=document.createElement("option");n.value=t,n.textContent=t,f.appendChild(n)}}async function V(){if(console.log("initCatalog fonksiyonu çağrıldı!"),!L||!v||!u||!f){console.error("Catalog için gerekli DOM elemanları bulunamadı!");return}K();try{const[e,t,n,i]=await Promise.all([_(),A(),M(),T()]),r=[...e.results,...t.results,...n.results,...i.results],o=new Map;r.forEach(c=>{o.has(c.id)||o.set(c.id,c)}),C(Array.from(o.values())),L.addEventListener("submit",async c=>{c.preventDefault();const a=document.getElementById("search-input").value.trim(),d=f.value;if(a)try{let l=(await I(a)).results;if(d&&(l=l.filter(s=>s.release_date&&s.release_date.startsWith(d))),C(l),l.length===0)u.style.display="block",u.textContent="Aradığınız kriterlere uygun film bulunamadı.";else{u.style.display="none",f.style.display="inline-block";const s=L.querySelector(".search-button");s&&f&&L.insertBefore(f,s)}}catch(h){console.error("Arama sırasında hata oluştu:",h),u.style.display="block",u.textContent="Film bulunamadı veya bir hata oluştu."}})}catch(e){console.error("Filmler yüklenirken hata:",e),u.style.display="block",u.textContent="Filmler yüklenirken hata oluştu."}}document.addEventListener("DOMContentLoaded",()=>{V(),J()});export{_ as a,z as b,P as c,W as d,M as e,A as f,T as g,G as h,V as i};
//# sourceMappingURL=catalog-Bt7V55Wf.js.map
